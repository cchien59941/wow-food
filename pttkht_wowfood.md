# Ph√¢n T√≠ch Thi·∫øt K·∫ø H·ªá Th·ªëng Web Food

## 1. Gi·ªõi Thi·ªáu

### 1.1 Gi·ªõi thi·ªáu ƒë·ªÅ t√†i

Trong b·ªëi c·∫£nh cu·ªôc s·ªëng hi·ªán ƒë·∫°i v·ªõi nh·ªãp ƒë·ªô nhanh ch√≥ng, vi·ªác ƒë·∫∑t ƒë·ªì ƒÉn tr·ª±c tuy·∫øn ƒë√£ tr·ªü th√†nh m·ªôt nhu c·∫ßu thi·∫øt y·∫øu c·ªßa x√£ h·ªôi. V·ªõi s·ª± ph√°t tri·ªÉn m·∫°nh m·∫Ω c·ªßa c√¥ng ngh·ªá th√¥ng tin v√† th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠, c√°c h·ªá th·ªëng ƒë·∫∑t m√≥n ƒÉn online kh√¥ng ch·ªâ gi√∫p ng∆∞·ªùi d√πng ti·∫øt ki·ªám th·ªùi gian m√† c√≤n t·∫°o c∆° h·ªôi kinh doanh cho c√°c nh√† h√†ng. ƒê·ªÅ t√†i n√†y ƒë∆∞·ª£c ch·ªçn nh·∫±m x√¢y d·ª±ng m·ªôt n·ªÅn t·∫£ng to√†n di·ªán, d·ªÖ s·ª≠ d·ª•ng, k·∫øt h·ª£p gi·ªØa giao di·ªán th√¢n thi·ªán v·ªõi ng∆∞·ªùi d√πng v√† h·ªá th·ªëng qu·∫£n l√Ω hi·ªáu qu·∫£ cho nh√† qu·∫£n tr·ªã, g√≥p ph·∫ßn th√∫c ƒë·∫©y xu h∆∞·ªõng s·ªë h√≥a trong ng√†nh d·ªãch v·ª• ƒÉn u·ªëng.

### 1.2 M√¥ t·∫£ b√†i to√°n

B√†i to√°n ch√≠nh: Trong b·ªëi c·∫£nh ph√°t tri·ªÉn th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠ v√† xu h∆∞·ªõng ti√™u d√πng online ng√†y c√†ng ph·ªï bi·∫øn, ƒë·∫∑c bi·ªát l√† lƒ©nh v·ª±c d·ªãch v·ª• ƒÉn u·ªëng, nhu c·∫ßu x√¢y d·ª±ng m·ªôt h·ªá th·ªëng ƒë·∫∑t ƒë·ªì ƒÉn tr·ª±c tuy·∫øn hi·ªáu qu·∫£, an to√†n v√† th√¢n thi·ªán v·ªõi ng∆∞·ªùi d√πng tr·ªü n√™n c·∫•p thi·∫øt. H·ªá th·ªëng c·∫ßn gi·∫£i quy·∫øt c√°c v·∫•n ƒë·ªÅ sau:

Qu·∫£n l√Ω ng∆∞·ªùi d√πng v√† b·∫£o m·∫≠t: ƒê·∫£m b·∫£o x√°c th·ª±c ng∆∞·ªùi d√πng qua email, b·∫£o v·ªá th√¥ng tin c√° nh√¢n, v√† ph√¢n quy·ªÅn r√µ r√†ng gi·ªØa kh√°ch h√†ng v√† qu·∫£n tr·ªã vi√™n.
Qu·∫£n l√Ω s·∫£n ph·∫©m v√† danh m·ª•c: Cho ph√©p hi·ªÉn th·ªã, t√¨m ki·∫øm, v√† qu·∫£n l√Ω m√≥n ƒÉn c√πng danh m·ª•c m·ªôt c√°ch d·ªÖ d√†ng.
Quy tr√¨nh ƒë·∫∑t h√†ng: T·∫°o tr·∫£i nghi·ªám ƒë·∫∑t h√†ng li·ªÅn m·∫°ch t·ª´ xem menu, th√™m v√†o gi·ªè h√†ng, ƒë·∫øn thanh to√°n v√† theo d√µi ƒë∆°n h√†ng.
Giao ti·∫øp v√† h·ªó tr·ª£: Cung c·∫•p k√™nh chat gi·ªØa kh√°ch h√†ng v√† admin ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ k·ªãp th·ªùi.
Qu·∫£n tr·ªã h·ªá th·ªëng: Admin c·∫ßn c√¥ng c·ª• ƒë·ªÉ qu·∫£n l√Ω ƒë∆°n h√†ng, m√≥n ƒÉn, danh m·ª•c, v√† ng∆∞·ªùi d√πng m·ªôt c√°ch hi·ªáu qu·∫£.
H·ªá th·ªëng ph·∫£i ƒë·∫£m b·∫£o t√≠nh b·∫£o m·∫≠t (ch·ªëng SQL injection, hash m·∫≠t kh·∫©u), hi·ªáu su·∫•t (t·∫£i nhanh, giao di·ªán responsive), v√† kh·∫£ nƒÉng m·ªü r·ªông (th√™m t√≠nh nƒÉng nh∆∞ thanh to√°n online, ƒë√°nh gi√° s·∫£n ph·∫©m).

## 2. M√¥ t·∫£ t·ªïng quan

### 2.1 T·ªïng quan h·ªá th·ªëng

H·ªá th·ªëng web b√°n ƒë·ªì ƒÉn l√† m·ªôt ·ª©ng d·ª•ng th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠ cho ph√©p ng∆∞·ªùi d√πng ƒë·∫∑t m√≥n ƒÉn tr·ª±c tuy·∫øn th√¥ng qua tr√¨nh duy·ªát web. H·ªá th·ªëng h·ªó tr·ª£ kh√°ch h√†ng xem menu, t√¨m ki·∫øm m√≥n ƒÉn, ƒë·∫∑t h√†ng v√† theo d√µi tr·∫°ng th√°i ƒë∆°n h√†ng m·ªôt c√°ch nhanh ch√≥ng v√† thu·∫≠n ti·ªán.

Trong b·ªëi c·∫£nh th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠ v√† xu h∆∞·ªõng ti√™u d√πng online ng√†y c√†ng ph√°t tri·ªÉn, ƒë·∫∑c bi·ªát trong lƒ©nh v·ª±c d·ªãch v·ª• ƒÉn u·ªëng, vi·ªác x√¢y d·ª±ng m·ªôt h·ªá th·ªëng ƒë·∫∑t ƒë·ªì ƒÉn tr·ª±c tuy·∫øn hi·ªáu qu·∫£, an to√†n v√† th√¢n thi·ªán v·ªõi ng∆∞·ªùi d√πng l√† nhu c·∫ßu c·∫•p thi·∫øt. H·ªá th·ªëng kh√¥ng ch·ªâ gi√∫p kh√°ch h√†ng ti·∫øt ki·ªám th·ªùi gian m√† c√≤n h·ªó tr·ª£ doanh nghi·ªáp qu·∫£n l√Ω ho·∫°t ƒë·ªông kinh doanh m·ªôt c√°ch hi·ªáu qu·∫£ h∆°n.

### 2.2 X√°c ƒë·ªãnh c√°c t√°c nh√¢n

H·ªá th·ªëng web b√°n ƒë·ªì ƒÉn ph·ª•c v·ª• cho c√°c ƒë·ªëi t∆∞·ª£ng ch√≠nh sau:

- Kh√°ch h√†ng c√≥ nhu c·∫ßu ƒë·∫∑t m√≥n ƒÉn tr·ª±c tuy·∫øn.
- Qu·∫£n tr·ªã vi√™n qu·∫£n l√Ω h·ªá th·ªëng

#### 2.2.1. Kh√°ch h√†ng

Kh√°ch h√†ng l√† ng∆∞·ªùi s·ª≠ d·ª•ng h·ªá th·ªëng ƒë·ªÉ:
ƒêƒÉng k√Ω, ƒëƒÉng nh·∫≠p t√†i kho·∫£n.
Xem danh m·ª•c v√† danh s√°ch m√≥n ƒÉn.
T√¨m ki·∫øm, l·ª±a ch·ªçn m√≥n ƒÉn v√† th√™m v√†o gi·ªè h√†ng.
ƒê·∫∑t h√†ng, thanh to√°n v√† theo d√µi tr·∫°ng th√°i ƒë∆°n h√†ng.
Trao ƒë·ªïi v·ªõi qu·∫£n tr·ªã vi√™n th√¥ng qua ch·ª©c nƒÉng chat khi c·∫ßn h·ªó tr·ª£.

#### 2.2.2. Qu·∫£n tr·ªã vi√™n

Qu·∫£n tr·ªã vi√™n l√† ng∆∞·ªùi qu·∫£n l√Ω to√†n b·ªô h·ªá th·ªëng, c√≥ c√°c ch·ª©c nƒÉng:
Qu·∫£n l√Ω ng∆∞·ªùi d√πng v√† ph√¢n quy·ªÅn.
Qu·∫£n l√Ω danh m·ª•c v√† m√≥n ƒÉn (th√™m, s·ª≠a, x√≥a).
Qu·∫£n l√Ω ƒë∆°n h√†ng v√† c·∫≠p nh·∫≠t tr·∫°ng th√°i x·ª≠ l√Ω.
Theo d√µi ho·∫°t ƒë·ªông h·ªá th·ªëng v√† h·ªó tr·ª£ kh√°ch h√†ng.
ƒê·∫£m b·∫£o an to√†n v√† ·ªïn ƒë·ªãnh cho h·ªá th·ªëng.

### 3.1 M√¥ t·∫£ m√†n h√¨nh

| STT   | M√†n h√¨nh                  | M√¥ t·∫£                                                                                                                                          |
| ----- | --------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| 1     | Trang ch·ªß                  | Ng∆∞·ªùi d√πng xem c√°c m√≥n ƒÉn hi·ªÉn th·ªã tr√™n m√†n h√¨nh, t√¨m ki·∫øm m√≥n ƒÉn, nh·∫≠p email li√™n h·ªá v√† ƒëi·ªÅu h∆∞·ªõng sang c√°c trang kh√°c |
| 2     | Danh s√°ch m√≥n ƒÉn         | Hi·ªÉn th·ªã c√°c m√≥n ƒÉn theo danh m·ª•c; b·ªô l·ªçc theo lo·∫°i m√≥n, gi√°, m·ª©c ƒë·ªô ph·ªï bi·∫øn                                                    |
| 3     | Chi ti·∫øt m√≥n ƒÉn          | Hi·ªÉn th·ªã t√™n m√≥n, m√£ m√≥n, gi√°, h√¨nh ·∫£nh, m√¥ t·∫£, th√†nh ph·∫ßn, s·ªë l∆∞·ª£ng c√≤n l·∫°i                                                   |
| 4     | Gi·ªè h√†ng                  | Danh s√°ch m√≥n ƒÉn ƒë√£ ch·ªçn, s·ªë l∆∞·ª£ng, t·ªïng ti·ªÅn, th√¥ng tin kh√°ch h√†ng, ph∆∞∆°ng th·ª©c thanh to√°n                                    |
| 5     | Theo d√µi ƒë∆°n             | Hi·ªÉn th·ªã t√¨nh tr·∫°ng ƒë∆°n h√†ng ƒëang ƒë∆∞·ª£c x·ª≠ l√Ω (ƒëang chu·∫©n b·ªã, ƒëang giao, ho√†n th√†nh)                                           |
| 6     | Li√™n h·ªá                   | Th√¥ng tin admin/c·ª≠a h√†ng: s·ªë ƒëi·ªán tho·∫°i, email, ƒë·ªãa ch·ªâ                                                                                |
| 7     | ƒêƒÉng nh·∫≠p                | Nh√¢n vi√™n v√† admin ƒëƒÉng nh·∫≠p v√†o h·ªá th·ªëng                                                                                               |
| 8     | ƒêƒÉng k√Ω                  | Nh√¢n vi√™n ƒëƒÉng k√Ω t√†i kho·∫£n                                                                                                               |
| 9     | Qu√™n m·∫≠t kh·∫©u            | Nh·∫≠p email ƒë·ªÉ nh·∫≠n m√£ x√°c th·ª±c                                                                                                            |
| 10    | OTP                         | Nh·∫≠p m√£ OTP ƒë·ªÉ x√°c th·ª±c                                                                                                                    |
| 11    | ƒê·ªïi m·∫≠t kh·∫©u            | Nh·∫≠p th√¥ng tin c·∫ßn thi·∫øt ƒë·ªÉ ƒë·ªïi m·∫≠t kh·∫©u                                                                                               |
| 12    | Qu·∫£n l√Ω danh m·ª•c         | Xem tr·∫°ng th√°i, ng∆∞·ªùi t·∫°o, t√¨m ki·∫øm; thao t√°c th√™m, s·ª≠a, x√≥a danh m·ª•c m√≥n ƒÉn                                                       |
| 13    | T·ªïng quan                  | Th·ªëng k√™ ng∆∞·ªùi d√πng, doanh thu, s·ªë ƒë∆°n h√†ng, bi·ªÉu ƒë·ªì doanh thu, ƒë∆°n h√†ng m·ªõi                                                     |
| 14    | T·∫°o danh m·ª•c              | T·∫°o danh m·ª•c m√≥n ƒÉn m·ªõi: t√™n, danh m·ª•c cha, v·ªã tr√≠, tr·∫°ng th√°i, ·∫£nh, m√¥ t·∫£                                                         |
| 15    | Ch·ªânh s·ª≠a danh m·ª•c       | C·∫≠p nh·∫≠t th√¥ng tin danh m·ª•c m√≥n ƒÉn                                                                                                         |
| 16    | Th√¥ng tin li√™n h·ªá        | Danh s√°ch email kh√°ch h√†ng v√† ng√†y t·∫°o                                                                                                     |
| 17    | Qu·∫£n l√Ω ƒë∆°n h√†ng       | T√¨m ki·∫øm, xem th√¥ng tin ƒë∆°n h√†ng: m√£ ƒë∆°n, kh√°ch h√†ng, m√≥n ƒÉn, thanh to√°n, tr·∫°ng th√°i                                             |
| 18    | Ch·ªânh s·ª≠a ƒë∆°n h√†ng     | S·ª≠a t√™n kh√°ch, s·ªë ƒëi·ªán tho·∫°i, ghi ch√∫, ph∆∞∆°ng th·ª©c thanh to√°n, tr·∫°ng th√°i ƒë∆°n                                                    |
| 19    | Qu·∫£n l√Ω m√≥n ƒÉn          | T√¨m ki·∫øm, t·∫°o m·ªõi, s·ª≠a, x√≥a m√≥n ƒÉn; xem ng∆∞·ªùi t·∫°o/c·∫≠p nh·∫≠t, gi√°, tr·∫°ng th√°i                                                      |
| 20    | T·∫°o m·ªõi m√≥n ƒÉn          | Nh·∫≠p th√¥ng tin m√≥n ƒÉn: t√™n, danh m·ª•c, gi√°, s·ªë l∆∞·ª£ng, h√¨nh ·∫£nh, m√¥ t·∫£                                                               |
| ph·ª•c |                             |                                                                                                                                                  |
| 22    | C√†i ƒë·∫∑t chung            | Qu·∫£n l√Ω th√¥ng tin website, t√†i kho·∫£n v√† nh√≥m quy·ªÅn                                                                                       |
| 23    | Th√¥ng tin website          | Ch·ªânh s·ª≠a t√™n website, s·ªë ƒëi·ªán tho·∫°i, email, ƒë·ªãa ch·ªâ, logo, favicon                                                                    |
| 24    | Qu·∫£n tr·ªã t√†i kho·∫£n      | Danh s√°ch nh√¢n vi√™n: s·ªë ƒëi·ªán tho·∫°i, nh√≥m quy·ªÅn, ch·ª©c v·ª•                                                                               |
| 25    | T·∫°o t√†i kho·∫£n qu·∫£n tr·ªã | Nh·∫≠p h·ªç t√™n, email, s·ªë ƒëi·ªán tho·∫°i, nh√≥m quy·ªÅn, ch·ª©c v·ª•, tr·∫°ng th√°i, m·∫≠t kh·∫©u                                                      |
| 26    | Nh√≥m quy·ªÅn                | Danh s√°ch nh√≥m quy·ªÅn v√† m√¥ t·∫£                                                                                                              |
| 27    | T·∫°o nh√≥m quy·ªÅn           | Th√™m nh√≥m quy·ªÅn m·ªõi                                                                                                                          |
| 28    | Ch·ªânh s·ª≠a nh√≥m quy·ªÅn    | Ch·ªânh s·ª≠a t√™n nh√≥m quy·ªÅn, m√¥ t·∫£ v√† ph√¢n quy·ªÅn                                                                                          |
| 29    | Th√¥ng tin c√° nh√¢n        | Qu·∫£n l√Ω th√¥ng tin c√° nh√¢n nh√¢n vi√™n                                                                                                       |

---

### 3.2 C√°c ch·ª©c nƒÉng kh√¥ng li√™n quan ƒë·∫øn m√†n h√¨nh

Ngo√†i c√°c ch·ª©c nƒÉng ƒë∆∞·ª£c th·ªÉ hi·ªán tr·ª±c ti·∫øp th√¥ng qua giao di·ªán ng∆∞·ªùi d√πng, h·ªá th·ªëng website b√°n ƒë·ªì ƒÉn c√≤n bao g·ªìm m·ªôt s·ªë ch·ª©c nƒÉng x·ª≠ l√Ω n·ªÅn nh·∫±m ƒë·∫£m b·∫£o t√≠nh b·∫£o m·∫≠t, ph√¢n quy·ªÅn v√† v·∫≠n h√†nh ·ªïn ƒë·ªãnh c·ªßa h·ªá th·ªëng.

| STT | Ch·ª©c nƒÉng h·ªá th·ªëng | M√¥ t·∫£                                                                                                                                                      |
| --- | ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 1   | G·ª≠i OTP               | H·ªá th·ªëng t·ª± ƒë·ªông g·ª≠i m√£ OTP ƒë·ªÉ x√°c th·ª±c ng∆∞·ªùi d√πng khi ƒëƒÉng k√Ω, ƒëƒÉng nh·∫≠p, qu√™n m·∫≠t kh·∫©u ho·∫∑c th·ª±c hi·ªán c√°c thao t√°c quan tr·ªçng |
| 2   | Qu·∫£n l√Ω ph√¢n quy·ªÅn | Qu·∫£n l√Ω v√† ph√¢n quy·ªÅn truy c·∫≠p gi·ªØa c√°c vai tr√≤ trong h·ªá th·ªëng nh∆∞ qu·∫£n tr·ªã vi√™n v√† nh√¢n vi√™n                                              |

---

### 3.3 H·ªá th·ªëng c·∫•p quy·ªÅn

H·ªá th·ªëng website b√°n ƒë·ªì ƒÉn ƒë∆∞·ª£c x√¢y d·ª±ng v·ªõi c∆° ch·∫ø ph√¢n quy·ªÅn r√µ r√†ng nh·∫±m ƒë·∫£m b·∫£o an to√†n d·ªØ li·ªáu v√† gi·ªõi h·∫°n quy·ªÅn thao t√°c c·ªßa t·ª´ng nh√≥m ng∆∞·ªùi d√πng.
C√°c quy·ªÅn c∆° b·∫£n bao g·ªìm: **Xem, Th√™m, S·ª≠a, X√≥a, T√¨m ki·∫øm v√† c√°c quy·ªÅn ƒë·∫∑c bi·ªát kh√°c**.

| M√†n h√¨nh / Ch·ª©c nƒÉng    | Xem | Th√™m | S·ª≠a | X√≥a | T√¨m ki·∫øm | Kh√°c |
| --------------------------- | :-: | :---: | :--: | :--: | :--------: | ----- |
| Trang ch·ªß                  |  x  |      |      |      |     x     |       |
| Danh s√°ch m√≥n ƒÉn         |  x  |      |      |      |     x     |       |
| Chi ti·∫øt m√≥n ƒÉn          |  x  |      |      |      |            |       |
| Gi·ªè h√†ng                  |  x  |   x   |      |      |            |       |
| Theo d√µi ƒë∆°n h√†ng       |  x  |      |      |      |            |       |
| Li√™n h·ªá                   |  x  |      |      |      |            |       |
| ƒêƒÉng nh·∫≠p                |  x  |   x   |      |      |            |       |
| ƒêƒÉng k√Ω                  |  x  |   x   |      |      |            |       |
| Qu√™n m·∫≠t kh·∫©u            |  x  |   x   |      |      |            |       |
| OTP                         |  x  |   x   |      |      |            |       |
| ƒê·ªïi m·∫≠t kh·∫©u            |  x  |      |  x  |      |            |       |
| T·ªïng quan (Dashboard)      |  x  |      |      |      |            |       |
| Qu·∫£n l√Ω danh m·ª•c         |  x  |   x   |  x  |  x  |            |       |
| T·∫°o danh m·ª•c              |    |   x   |      |      |            |       |
| Ch·ªânh s·ª≠a danh m·ª•c       |    |      |  x  |      |            |       |
| Th√¥ng tin li√™n h·ªá        |  x  |      |      |      |            |       |
| Qu·∫£n l√Ω ƒë∆°n h√†ng       |  x  |   x   |  x  |  x  |     x     |       |
| Ch·ªânh s·ª≠a ƒë∆°n h√†ng     |    |      |  x  |      |            |       |
| Qu·∫£n l√Ω m√≥n ƒÉn          |  x  |   x   |  x  |  x  |     x     |       |
| C√†i ƒë·∫∑t chung            |  x  |      |  x  |      |            |       |
| Th√¥ng tin website          |  x  |      |  x  |      |            |       |
| Qu·∫£n tr·ªã t√†i kho·∫£n      |  x  |      |      |      |            |       |
| T·∫°o t√†i kho·∫£n qu·∫£n tr·ªã |    |   x   |      |      |            |       |
| Nh√≥m quy·ªÅn                |  x  |   x   |  x  |  x  |     x     |       |
| Th√¥ng tin c√° nh√¢n        |  x  |      |  x  |      |            |       |
| ƒê·ªïi m·∫≠t kh·∫©u c√° nh√¢n  |  x  |      |  x  |      |            |       |

#### Trong ƒë√≥

- **Xem**: Cho ph√©p kh√°ch h√†ng ho·∫∑c nh√¢n vi√™n xem th√¥ng tin hi·ªÉn th·ªã tr√™n giao di·ªán ho·∫∑c c√°c d·ªØ li·ªáu th·ªëng k√™ li√™n quan.
- **Th√™m**: Cho ph√©p kh√°ch h√†ng ƒë·∫∑t m√≥n ƒÉn; cho ph√©p nh√¢n vi√™n ho·∫∑c qu·∫£n tr·ªã vi√™n t·∫°o m·ªõi d·ªØ li·ªáu trong h·ªá th·ªëng.
- **S·ª≠a**: Cho ph√©p nh√¢n vi√™n ho·∫∑c qu·∫£n tr·ªã vi√™n c·∫≠p nh·∫≠t c√°c th√¥ng tin ƒë√£ t·ªìn t·∫°i trong h·ªá th·ªëng.
- **X√≥a**: Cho ph√©p x√≥a d·ªØ li·ªáu kh·ªèi h·ªá th·ªëng, th∆∞·ªùng ch·ªâ √°p d·ª•ng cho c√°c vai tr√≤ c√≥ quy·ªÅn cao.
- **T√¨m ki·∫øm**: Cho ph√©p l·ªçc v√† t√¨m ki·∫øm d·ªØ li·ªáu theo c√°c ti√™u ch√≠ kh√°c nhau.
- **Kh√°c**: Bao g·ªìm c√°c quy·ªÅn ƒë·∫∑c bi·ªát nh∆∞ kh√¥i ph·ª•c d·ªØ li·ªáu, x√°c th·ª±c OTP ho·∫∑c c√°c thao t√°c n√¢ng cao kh√°c.

H·ªá th·ªëng ph√¢n quy·ªÅn gi√∫p ƒë·∫£m b·∫£o d·ªØ li·ªáu ƒë∆∞·ª£c qu·∫£n l√Ω ch·∫∑t ch·∫Ω, gi·∫£m thi·ªÉu r·ªßi ro v√† n√¢ng cao hi·ªáu qu·∫£ v·∫≠n h√†nh website b√°n ƒë·ªì ƒÉn.

## 4. T·ªïng quan v·ªÅ ph·∫ßn m·ªÅm

### C√°c ch·ª©c nƒÉng h·ªá th·ªëng

### 4.1 Ch·ª©c nƒÉng ph√≠a kh√°ch h√†ng

Kh√°ch h√†ng l√† ng∆∞·ªùi tr·ª±c ti·∫øp s·ª≠ d·ª•ng website ƒë·ªÉ xem v√† ƒë·∫∑t m√≥n ƒÉn. H·ªá th·ªëng cung c·∫•p c√°c ch·ª©c nƒÉng sau:

### 4.1.1 Xem danh s√°ch m√≥n ƒÉn

Hi·ªÉn th·ªã c√°c m√≥n ƒÉn k√®m h√¨nh ·∫£nh, t√™n m√≥n, gi√° b√°n, m√¥ t·∫£ v√† tr·∫°ng th√°i c√≤n/h·∫øt m√≥n.

### 4.1.2 T√¨m ki·∫øm v√† l·ªçc m√≥n ƒÉn

Cho ph√©p ng∆∞·ªùi d√πng t√¨m ki·∫øm m√≥n ƒÉn theo t√™n, lo·∫°i m√≥n (ƒë·ªì ƒÉn nhanh, ƒë·ªì u·ªëng, combo, ‚Ä¶), kho·∫£ng gi√°.

### 4.1.3 Qu·∫£n l√Ω gi·ªè h√†ng

Th√™m, s·ª≠a s·ªë l∆∞·ª£ng, x√≥a m√≥n ƒÉn trong gi·ªè h√†ng v√† xem t·ªïng ti·ªÅn t·∫°m t√≠nh.

### 4.1.4 ƒê·∫∑t h√†ng v√† thanh to√°n

Cho ph√©p kh√°ch h√†ng nh·∫≠p th√¥ng tin giao h√†ng, l·ª±a ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n (ti·ªÅn m·∫∑t, chuy·ªÉn kho·∫£n, v√≠ ƒëi·ªán t·ª≠, ‚Ä¶) v√† x√°c nh·∫≠n ƒë∆°n h√†ng.

### 4.1.5 ƒêƒÉng k√Ω, ƒëƒÉng nh·∫≠p t√†i kho·∫£n

Kh√°ch h√†ng c√≥ th·ªÉ t·∫°o t√†i kho·∫£n ƒë·ªÉ l∆∞u th√¥ng tin c√° nh√¢n v√† l·ªãch s·ª≠ mua h√†ng.

### 4.1.6 Qu·∫£n l√Ω th√¥ng tin c√° nh√¢n

C·∫≠p nh·∫≠t th√¥ng tin c√° nh√¢n nh∆∞ t√™n, s·ªë ƒëi·ªán tho·∫°i, ƒë·ªãa ch·ªâ giao h√†ng.

### 4.1.7 Xem l·ªãch s·ª≠ ƒë∆°n h√†ng

Cho ph√©p kh√°ch h√†ng theo d√µi tr·∫°ng th√°i v√† xem l·∫°i c√°c ƒë∆°n h√†ng ƒë√£ ƒë·∫∑t.

---

### 4.2 Ch·ª©c nƒÉng ph√≠a qu·∫£n tr·ªã vi√™n

Qu·∫£n tr·ªã vi√™n l√† ng∆∞·ªùi qu·∫£n l√Ω to√†n b·ªô ho·∫°t ƒë·ªông c·ªßa h·ªá th·ªëng. C√°c ch·ª©c nƒÉng ch√≠nh bao g·ªìm:

### 4.2.1 Qu·∫£n l√Ω t√†i kho·∫£n ng∆∞·ªùi d√πng

Xem, th√™m, s·ª≠a, kh√≥a ho·∫∑c x√≥a t√†i kho·∫£n kh√°ch h√†ng.

### 4.2.2 Qu·∫£n l√Ω danh m·ª•c m√≥n ƒÉn

Th√™m, ch·ªânh s·ª≠a, x√≥a c√°c danh m·ª•c m√≥n ƒÉn (ƒë·ªì ƒÉn, ƒë·ªì u·ªëng, combo, ‚Ä¶).

### 4.2.3 Qu·∫£n l√Ω m√≥n ƒÉn

Th√™m m·ªõi, c·∫≠p nh·∫≠t th√¥ng tin, gi√° b√°n, h√¨nh ·∫£nh v√† tr·∫°ng th√°i c·ªßa m√≥n ƒÉn.

### 4.2.3 Qu·∫£n l√Ω ƒë∆°n h√†ng

Xem danh s√°ch ƒë∆°n h√†ng, c·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë∆°n h√†ng (ch·ªù x√°c nh·∫≠n, ƒëang giao, ƒë√£ giao, h·ªßy).

### 4.2.4 Qu·∫£n l√Ω thanh to√°n

Theo d√µi t√¨nh tr·∫°ng thanh to√°n c·ªßa c√°c ƒë∆°n h√†ng.

### 4.2.5 Th·ªëng k√™ v√† b√°o c√°o

Th·ªëng k√™ doanh thu theo ng√†y, th√°ng, nƒÉm; s·ªë l∆∞·ª£ng ƒë∆°n h√†ng; c√°c m√≥n ƒÉn b√°n ch·∫°y.

### 4.2.6 Qu·∫£n l√Ω n·ªôi dung website

C·∫≠p nh·∫≠t banner, th√¥ng tin gi·ªõi thi·ªáu, ch√≠nh s√°ch b√°n h√†n

### 4.3 Bi·ªÉu ƒë·ªì m√¥ t·∫£ h·ªá th·ªëng

#### ƒê·∫∑c t·∫£ Use Case t·ªïng quan h·ªá th·ªëng

#### 4.3.1 Use Case Diagram

Th·ªÉ hi·ªán h·ªá th·ªëng l√†m ƒë∆∞·ª£c g√¨

#### A) Kh√°ch h√†ng

![img](public/assets/images/usecase3.png)

---

#### B) Qu·∫£n tr·ªã vi√™n

![img](public/assets/images/usecase4.png)

---

##### ƒê·∫∑c t·∫£

| Thu·ªôc t√≠nh                 | M√¥ t·∫£                                                                                                                                                      |
| ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **T√™n Use Case**      | S·ª≠ d·ª•ng h·ªá th·ªëng Website b√°n ƒë·ªì ƒÉn                                                                                                                   |
| **T√°c nh√¢n ch√≠nh**  | Kh√°ch h√†ng                                                                                                                                                 |
| **T√°c nh√¢n ph·ª•**    | Qu·∫£n tr·ªã vi√™n                                                                                                                                             |
| **M√¥ t·∫£**            | H·ªá th·ªëng cho ph√©p kh√°ch h√†ng xem v√† ƒë·∫∑t m√≥n ƒÉn tr·ª±c tuy·∫øn; qu·∫£n tr·ªã vi√™n qu·∫£n l√Ω m√≥n ƒÉn, ƒë∆°n h√†ng, ng∆∞·ªùi d√πng v√† n·ªôi dung website |
| **Ti·ªÅn ƒëi·ªÅu ki·ªán** | H·ªá th·ªëng ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng                                                                                                                       |
| **H·∫≠u ƒëi·ªÅu ki·ªán**  | D·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u tr·ªØ v√† c·∫≠p nh·∫≠t ch√≠nh x√°c                                                                                                       |
| **Lu·ªìng ch√≠nh**      | Ng∆∞·ªùi d√πng truy c·∫≠p website v√† th·ª±c hi·ªán c√°c ch·ª©c nƒÉng ph√π h·ª£p v·ªõi vai tr√≤                                                                     |
| **Lu·ªìng thay th·∫ø**   | L·ªói h·ªá th·ªëng ho·∫∑c ng∆∞·ªùi d√πng ch∆∞a ƒëƒÉng nh·∫≠p                                                                                                       |

#### Chi ti·∫øt h·ªá th·ªëng

#### 4.3.2 Sequence Diagram

Th·ªÉ hi·ªán c√°c ƒë·ªëi t∆∞·ª£ng t∆∞∆°ng t√°c v·ªõi nhau nh∆∞ th·∫ø n√†o theo th·ªùi gian

#### A) Kh√°ch h√†ng

#### 1. Xem danh s√°ch m√≥n ƒÉn

![img](public/assets/images/Sequence4.jpg)

T√™n ch·ª©c nƒÉng
  Xem danh s√°ch m√≥n ƒÉn
Actor
  Kh√°ch h√†ng
M√¥ t·∫£
  Ch·ª©c nƒÉng cho ph√©p kh√°ch h√†ng truy c·∫≠p trang danh s√°ch m√≥n ƒÉn v√† xem to√†n b·ªô c√°c m√≥n ƒÉn hi·ªán c√≥ trong h·ªá th·ªëng.
ƒêi·ªÅu ki·ªán ti√™n quy·∫øt
  ‚Ä¢	 H·ªá th·ªëng ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng
  ‚Ä¢	 Database ƒë√£ c√≥ d·ªØ li·ªáu m√≥n ƒÉn
Lu·ªìng ch√≠nh
  1.	Kh√°ch h√†ng truy c·∫≠p trang danh s√°ch m√≥n ƒÉn.
  2.	Giao di·ªán Web g·ª≠i y√™u c·∫ßu l·∫•y danh s√°ch m√≥n ƒÉn ƒë·∫øn Server/Backend.
  3.	Server/Backend truy v·∫•n Database ƒë·ªÉ l·∫•y to√†n b·ªô m√≥n ƒÉn.
  4.	Database tr·∫£ v·ªÅ danh s√°ch m√≥n ƒÉn cho Server/Backend.
  5.	Server/Backend tr·∫£ d·ªØ li·ªáu danh s√°ch m√≥n ƒÉn cho Giao di·ªán Web.
  6.	Giao di·ªán Web hi·ªÉn th·ªã danh s√°ch m√≥n ƒÉn cho kh√°ch h√†ng.
H·∫≠u ƒëi·ªÅu ki·ªán
  Danh s√°ch m√≥n ƒÉn ƒë∆∞·ª£c hi·ªÉn th·ªã th√†nh c√¥ng cho kh√°ch h√†ng.

#### 2. T√¨m ki·∫øm v√† l·ªçc m√≥n ƒÉn

![img](public/assets/images/sequence5.jpg)

T√™n ch·ª©c nƒÉng
  T√¨m ki·∫øm v√† l·ªçc m√≥n ƒÉn
Actor
  Kh√°ch h√†ng
M√¥ t·∫£
  Ch·ª©c nƒÉng cho ph√©p kh√°ch h√†ng t√¨m ki·∫øm m√≥n ƒÉn theo t·ª´ kh√≥a ho·∫∑c l·ªçc theo c√°c ti√™u ch√≠ nh∆∞ lo·∫°i m√≥n, gi√°, tr·∫°ng th√°i.
ƒêi·ªÅu ki·ªán ti√™n quy·∫øt
  ‚Ä¢	Danh s√°ch m√≥n ƒÉn ƒë√£ ƒë∆∞·ª£c t·∫£i
  ‚Ä¢	H·ªá th·ªëng c√≥ d·ªØ li·ªáu m√≥n ƒÉn
Lu·ªìng ch√≠nh
  1.	Kh√°ch h√†ng nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm ho·∫∑c ch·ªçn b·ªô l·ªçc.
  2.	Giao di·ªán Web g·ª≠i y√™u c·∫ßu t√¨m ki·∫øm v√† l·ªçc ƒë·∫øn Server/Backend.
  3.	Server/Backend x·ª≠ l√Ω y√™u c·∫ßu v√† truy v·∫•n Database theo ƒëi·ªÅu ki·ªán.
  4.	Database tr·∫£ v·ªÅ k·∫øt qu·∫£ t√¨m ki·∫øm cho Server/Backend.
  5.	Server/Backend tr·∫£ danh s√°ch m√≥n ƒÉn ƒë√£ l·ªçc cho Giao di·ªán Web.
  6.	Giao di·ªán Web hi·ªÉn th·ªã k·∫øt qu·∫£ t√¨m ki·∫øm cho kh√°ch h√†ng.
H·∫≠u ƒëi·ªÅu ki·ªán
  K·∫øt qu·∫£ t√¨m ki·∫øm v√† l·ªçc ƒë∆∞·ª£c hi·ªÉn th·ªã ƒë√∫ng theo y√™u c·∫ßu.

#### 3. qu·∫£n l√Ω gi·ªè h√†ng

![img](public/assets/images/sequence6.png)

T√™n ch·ª©c nƒÉng
  Qu·∫£n l√Ω gi·ªè h√†ng
Actor
  Kh√°ch h√†ng
M√¥ t·∫£
  Ch·ª©c nƒÉng cho ph√©p kh√°ch h√†ng th√™m, x√≥a ho·∫∑c c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng m√≥n ƒÉn trong gi·ªè h√†ng.
ƒêi·ªÅu ki·ªán ti√™n quy·∫øt
  ‚Ä¢	Kh√°ch h√†ng ƒë√£ ch·ªçn m√≥n ƒÉn
  ‚Ä¢	H·ªá th·ªëng ƒëang ho·∫°t ƒë·ªông
Lu·ªìng ch√≠nh
  1.	Kh√°ch h√†ng th·ª±c hi·ªán thao t√°c th√™m / x√≥a / c·∫≠p nh·∫≠t m√≥n ƒÉn trong gi·ªè h√†ng.
  2.	Giao di·ªán Web g·ª≠i y√™u c·∫ßu c·∫≠p nh·∫≠t gi·ªè h√†ng ƒë·∫øn Server/Backend.
  3.	Server/Backend c·∫≠p nh·∫≠t d·ªØ li·ªáu gi·ªè h√†ng trong Database.
  4.	Database x√°c nh·∫≠n c·∫≠p nh·∫≠t th√†nh c√¥ng.
  5.	Server/Backend tr·∫£ th√¥ng tin gi·ªè h√†ng m·ªõi cho Giao di·ªán Web.
  6.	Giao di·ªán Web hi·ªÉn th·ªã gi·ªè h√†ng ƒë√£ c·∫≠p nh·∫≠t cho kh√°ch h√†ng.
H·∫≠u ƒëi·ªÅu ki·ªán
  Gi·ªè h√†ng ƒë∆∞·ª£c c·∫≠p nh·∫≠t ƒë√∫ng theo thao t√°c c·ªßa kh√°ch h√†ng.

#### 4.ƒë·∫∑t h√†ng v√† thanh to√°n

![img](public/assets/images/sequence7.png)

T√™n ch·ª©c nƒÉng
  ƒê·∫∑t h√†ng v√† thanh to√°n
Actor
   h√†ng
M√¥ t·∫£
   nƒÉng cho ph√©p kh√°ch h√†ng x√°c nh·∫≠n ƒë∆°n h√†ng v√† th·ª±c hi·ªán thanh to√°n th√¥ng qua c·ªïng thanh to√°n.
ƒêi·ªÅu ki·ªán ti√™n quy·∫øt
  ‚Ä¢	Gi·ªè h√†ng kh√¥ng r·ªóng
  ‚Ä¢	Kh√°ch h√†ng ƒë√£ nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin ƒë∆°n h√†ng
Lu·ªìng ch√≠nh
  1.	Kh√°ch h√†ng x√°c nh·∫≠n ƒë·∫∑t h√†ng.
  2.	Giao di·ªán Web g·ª≠i th√¥ng tin ƒë∆°n h√†ng ƒë·∫øn Server/Backend.
  3.	Server/Backend g·ª≠i y√™u c·∫ßu thanh to√°n ƒë·∫øn C·ªïng thanh to√°n.
  4.	C·ªïng thanh to√°n x·ª≠ l√Ω v√† tr·∫£ k·∫øt qu·∫£ thanh to√°n cho Server/Backend.
  5.	Server/Backend l∆∞u th√¥ng tin ƒë∆°n h√†ng v√†o Database.
  6.	Database x√°c nh·∫≠n l∆∞u ƒë∆°n h√†ng th√†nh c√¥ng.
  7.	Server/Backend g·ª≠i th√¥ng b√°o thanh to√°n th√†nh c√¥ng v·ªÅ Giao di·ªán Web.
  8.	Giao di·ªán Web hi·ªÉn th·ªã k·∫øt qu·∫£ cho kh√°ch h√†ng.
H·∫≠u ƒëi·ªÅu ki·ªán
  ‚Ä¢	ƒê∆°n h√†ng ƒë∆∞·ª£c l∆∞u th√†nh c√¥ng
  ‚Ä¢	Thanh to√°n ho√†n t·∫•t

#### 5. ƒêƒÉng k√Ω, ƒëƒÉng nh·∫≠p

![img](public/assets/images/sequence.png)

##### ƒê·∫∑c t·∫£

##### ƒêƒÉng k√Ω

| Thu·ªôc t√≠nh                 | M√¥ t·∫£                                                                                                                                                                                                                                                                                          |
| ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **T√™n k·ªãch b·∫£n**    | ƒêƒÉng k√Ω t√†i kho·∫£n                                                                                                                                                                                                                                                                           |
| **T√°c nh√¢n**         | Kh√°ch h√†ng                                                                                                                                                                                                                                                                                     |
| **M√¥ t·∫£**            | M√¥ t·∫£ tr√¨nh t·ª± c√°c b∆∞·ªõc khi kh√°ch h√†ng ƒëƒÉng k√Ω t√†i kho·∫£n m·ªõi tr√™n h·ªá th·ªëng                                                                                                                                                                                                     |
| **Ti·ªÅn ƒëi·ªÅu ki·ªán** | Kh√°ch h√†ng ch∆∞a c√≥ t√†i kho·∫£n, h·ªá th·ªëng ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng                                                                                                                                                                                                                       |
| **H·∫≠u ƒëi·ªÅu ki·ªán**  | T√†i kho·∫£n kh√°ch h√†ng ƒë∆∞·ª£c t·∫°o v√† l∆∞u v√†o c∆° s·ªü d·ªØ li·ªáu                                                                                                                                                                                                                            |
| **Lu·ªìng ch√≠nh**      | 1. Kh√°ch h√†ng truy c·∫≠p trang ƒëƒÉng k√Ω<br />2. H·ªá th·ªëng hi·ªÉn th·ªã form ƒëƒÉng k√Ω<br />3. Kh√°ch h√†ng nh·∫≠p th√¥ng tin c√° nh√¢n<br />4. G·ª≠i y√™u c·∫ßu ƒëƒÉng k√Ω<br />5. H·ªá th·ªëng ki·ªÉm tra d·ªØ li·ªáu<br />6. L∆∞u t√†i kho·∫£n v√†o CSDL<br />7. Th√¥ng b√°o ƒëƒÉng k√Ω th√†nh c√¥ng |
| **Lu·ªìng thay th·∫ø**   | - Th√¥ng tin kh√¥ng h·ª£p l·ªá ‚Üí y√™u c·∫ßu nh·∫≠p l·∫°i<br />- Email ƒë√£ t·ªìn t·∫°i ‚Üí th√¥ng b√°o l·ªói                                                                                                                                                                                             |

---

![img](public/assets/images/sequence1.png)

##### ƒê·∫∑c t·∫£

##### ƒêƒÉng nh·∫≠p

---

| Thu·ªôc t√≠nh                 | M√¥ t·∫£                                                                                                                                                                                                                  |
| ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **T√™n k·ªãch b·∫£n**    | ƒêƒÉng nh·∫≠p t√†i kho·∫£n                                                                                                                                                                                                 |
| **T√°c nh√¢n**         | Kh√°ch h√†ng                                                                                                                                                                                                             |
| **M√¥ t·∫£**            | M√¥ t·∫£ qu√° tr√¨nh kh√°ch h√†ng ƒëƒÉng nh·∫≠p v√†o h·ªá th·ªëng                                                                                                                                                            |
| **Ti·ªÅn ƒëi·ªÅu ki·ªán** | Kh√°ch h√†ng ƒë√£ c√≥ t√†i kho·∫£n h·ª£p l·ªá                                                                                                                                                                               |
| **H·∫≠u ƒëi·ªÅu ki·ªán**  | Kh√°ch h√†ng ƒëƒÉng nh·∫≠p th√†nh c√¥ng v√† c√≥ phi√™n l√†m vi·ªác                                                                                                                                                         |
| **Lu·ªìng ch√≠nh**      | 1. Truy c·∫≠p trang ƒëƒÉng nh·∫≠p<br />2. Hi·ªÉn th·ªã form ƒëƒÉng nh·∫≠p<br />3. Nh·∫≠p email v√† m·∫≠t kh·∫©u<br />4. H·ªá th·ªëng x√°c th·ª±c th√¥ng tin<br />5. T·∫°o phi√™n ƒëƒÉng nh·∫≠p<br />6. Chuy·ªÉn h∆∞·ªõng v·ªÅ trang ch·ªß |
| **Lu·ªìng thay th·∫ø**   | - Sai th√¥ng tin ƒëƒÉng nh·∫≠p ‚Üí th√¥ng b√°o l·ªói<br />- T√†i kho·∫£n b·ªã kh√≥a ‚Üí t·ª´ ch·ªëi ƒëƒÉng nh·∫≠p                                                                                                                 |

---                                                                                           |

#### 6. Qu·∫£n l√Ω th√¥ng tin c√° nh√¢n

![img](public/assets/images/sequence2.png)

##### ƒê·∫∑c t·∫£

---

## Sequence Diagram: Qu·∫£n l√Ω th√¥ng tin c√° nh√¢n

### B·∫£ng ƒë·∫∑c t·∫£ Sequence Diagram ‚Äì Qu·∫£n l√Ω th√¥ng tin c√° nh√¢n

| Thu·ªôc t√≠nh                 | M√¥ t·∫£                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| ---------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **T√™n k·ªãch b·∫£n**    | Qu·∫£n l√Ω th√¥ng tin c√° nh√¢n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **T√°c nh√¢n ch√≠nh**  | Kh√°ch h√†ng                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **T√°c nh√¢n ph·ª•**    | H·ªá th·ªëng Website, C∆° s·ªü d·ªØ li·ªáu                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **M√¥ t·∫£**            | Kh√°ch h√†ng xem v√† c·∫≠p nh·∫≠t th√¥ng tin c√° nh√¢n c·ªßa m√¨nh nh∆∞ t√™n, s·ªë ƒëi·ªán tho·∫°i, ƒë·ªãa ch·ªâ giao h√†ng.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Ti·ªÅn ƒëi·ªÅu ki·ªán** | Kh√°ch h√†ng ƒë√£ ƒëƒÉng nh·∫≠p th√†nh c√¥ng v√†o h·ªá th·ªëng.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **H·∫≠u ƒëi·ªÅu ki·ªán**  | Th√¥ng tin c√° nh√¢n ƒë∆∞·ª£c c·∫≠p nh·∫≠t v√† l∆∞u tr·ªØ ch√≠nh x√°c trong c∆° s·ªü d·ªØ li·ªáu.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Lu·ªìng ch√≠nh**      | 1. Kh√°ch h√†ng truy c·∫≠p ch·ª©c nƒÉng Qu·∫£n l√Ω th√¥ng tin c√° nh√¢n.<br />2. H·ªá th·ªëng g·ª≠i y√™u c·∫ßu l·∫•y th√¥ng tin c√° nh√¢n c·ªßa kh√°ch h√†ng.<br />3. C∆° s·ªü d·ªØ li·ªáu tr·∫£ v·ªÅ th√¥ng tin hi·ªán t·∫°i c·ªßa kh√°ch h√†ng.<br />4. H·ªá th·ªëng hi·ªÉn th·ªã th√¥ng tin c√° nh√¢n l√™n giao di·ªán.<br />5. Kh√°ch h√†ng ch·ªânh s·ª≠a th√¥ng tin (t√™n, s·ªë ƒëi·ªán tho·∫°i, ƒë·ªãa ch·ªâ).<br />6. Kh√°ch h√†ng nh·∫•n **L∆∞u c·∫≠p nh·∫≠t**.<br />7. H·ªá th·ªëng ki·ªÉm tra t√≠nh h·ª£p l·ªá c·ªßa d·ªØ li·ªáu.<br />8. H·ªá th·ªëng c·∫≠p nh·∫≠t th√¥ng tin m·ªõi v√†o c∆° s·ªü d·ªØ li·ªáu.<br />9. C∆° s·ªü d·ªØ li·ªáu ph·∫£n h·ªìi c·∫≠p nh·∫≠t th√†nh c√¥ng.<br />10. H·ªá th·ªëng hi·ªÉn th·ªã th√¥ng b√°o c·∫≠p nh·∫≠t th√†nh c√¥ng cho kh√°ch h√†ng. |
| **Lu·ªìng thay th·∫ø**   | D·ªØ li·ªáu nh·∫≠p kh√¥ng h·ª£p l·ªá (thi·∫øu th√¥ng tin, sai ƒë·ªãnh d·∫°ng) ‚Üí H·ªá th·ªëng hi·ªÉn th·ªã th√¥ng b√°o l·ªói v√† y√™u c·∫ßu nh·∫≠p l·∫°i.<br />C·∫≠p nh·∫≠t th·∫•t b·∫°i do l·ªói h·ªá th·ªëng ‚Üí H·ªá th·ªëng hi·ªÉn th·ªã th√¥ng b√°o *‚ÄúC·∫≠p nh·∫≠t kh√¥ng th√†nh c√¥ng‚Äù*.                                                                                                                                                                                                                                                                                                                                                                                                                                                               |

#### 7. Xem l·ªãch s·ª≠ ƒë∆°n h√†ng

![img](public/assets/images/sequence3.png)

##### ƒê·∫∑c t·∫£

| Thu·ªôc t√≠nh                 | M√¥ t·∫£                                                                                                                                                                                                     |
| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **T√™n k·ªãch b·∫£n**    | Xem l·ªãch s·ª≠ ƒë∆°n h√†ng                                                                                                                                                                                   |
| **T√°c nh√¢n**         | Kh√°ch h√†ng                                                                                                                                                                                                |
| **M√¥ t·∫£**            | M√¥ t·∫£ tr√¨nh t·ª± c√°c b∆∞·ªõc khi kh√°ch h√†ng xem c√°c ƒë∆°n h√†ng ƒë√£ ƒë·∫∑t                                                                                                                             |
| **Ti·ªÅn ƒëi·ªÅu ki·ªán** | Kh√°ch h√†ng ƒë√£ ƒëƒÉng nh·∫≠p                                                                                                                                                                              |
| **H·∫≠u ƒëi·ªÅu ki·ªán**  | Danh s√°ch ƒë∆°n h√†ng c·ªßa kh√°ch h√†ng ƒë∆∞·ª£c hi·ªÉn th·ªã                                                                                                                                                 |
| **Lu·ªìng ch√≠nh**      | 1. Truy c·∫≠p ch·ª©c nƒÉng l·ªãch s·ª≠ ƒë∆°n h√†ng<br />2. H·ªá th·ªëng ki·ªÉm tra ƒëƒÉng nh·∫≠p<br />3. Truy v·∫•n ƒë∆°n h√†ng t·ª´ CSDL<br />4. Hi·ªÉn th·ªã danh s√°ch ƒë∆°n h√†ng<br />5. Xem chi ti·∫øt ƒë∆°n h√†ng |
| **Lu·ªìng thay th·∫ø**   | - Ch∆∞a ƒëƒÉng nh·∫≠p ‚Üí y√™u c·∫ßu ƒëƒÉng nh·∫≠p<br />- Kh√¥ng c√≥ ƒë∆°n h√†ng ‚Üí hi·ªÉn th·ªã th√¥ng b√°o                                                                                                      |

---

#### A) Qu·∫£n tr·ªã vi√™n

#### 8. Qu·∫£n l√Ω danh m·ª•c m√≥n ƒÉn
![img](public/assets/images/SE_QlyDanhMucMonAn.png)
**ƒê·∫∂C T·∫¢ S∆† ƒê·ªí TU·∫¶N T·ª∞**
Use case: Qu·∫£n l√Ω danh m·ª•c m√≥n ƒÉn (X√≥a danh m·ª•c)
üîπ Actor
‚Ä¢	Qu·∫£n tr·ªã vi√™n
üîπ C√°c ƒë·ªëi t∆∞·ª£ng tham gia
‚Ä¢	Giao di·ªán (UI)
‚Ä¢	H·ªá th·ªëng
‚Ä¢	C∆° s·ªü d·ªØ li·ªáu (CSDL)
üîπ Lu·ªìng ch√≠nh
1.	Qu·∫£n tr·ªã vi√™n ch·ªçn ch·ª©c nƒÉng X√≥a danh m·ª•c m√≥n ƒÉn.
2.	Giao di·ªán g·ª≠i ID danh m·ª•c c·∫ßn x√≥a ƒë·∫øn H·ªá th·ªëng.
3.	H·ªá th·ªëng ki·ªÉm tra trong CSDL xem danh m·ª•c c√≥ ch·ª©a m√≥n ƒÉn hay kh√¥ng.
4.	N·∫øu danh m·ª•c kh√¥ng ch·ª©a m√≥n ƒÉn, H·ªá th·ªëng th·ª±c hi·ªán x√≥a danh m·ª•c trong CSDL.
5.	CSDL x√°c nh·∫≠n x√≥a th√†nh c√¥ng.
6.	H·ªá th·ªëng th√¥ng b√°o k·∫øt qu·∫£ th√†nh c√¥ng cho qu·∫£n tr·ªã vi√™n.
üîπ Lu·ªìng ph·ª•
‚Ä¢	Lu·ªìng ph·ª• 1 ‚Äì Danh m·ª•c c√≥ m√≥n ƒÉn
o	T·∫°i b∆∞·ªõc 3, n·∫øu danh m·ª•c c√≤n t·ªìn t·∫°i m√≥n ƒÉn, H·ªá th·ªëng kh√¥ng cho ph√©p x√≥a v√† g·ª≠i th√¥ng b√°o l·ªói.
üîπ Th·ª© t·ª± message
1.	Admin ‚Üí UI: Ch·ªçn x√≥a danh m·ª•c
2.	UI ‚Üí System: G·ª≠i ID danh m·ª•c
3.	System ‚Üí DB: Ki·ªÉm tra r√†ng bu·ªôc
4.	DB ‚Üí System: K·∫øt qu·∫£ ki·ªÉm tra
5.	System ‚Üí DB: X√≥a danh m·ª•c
6.	System ‚Üí UI: Th√¥ng b√°o k·∫øt qu·∫£
#### 9. Qu·∫£n l√Ω t√†i kho·∫£n ng∆∞·ªùi d√πng
![img](public/assets/images/SE_QlyTaiKhoanNguoiDung.png)
**ƒê·∫∂C T·∫¢ S∆† ƒê·ªí TU·∫¶N T·ª∞**
üîπ Actor
‚Ä¢	Qu·∫£n tr·ªã vi√™n
üîπ C√°c ƒë·ªëi t∆∞·ª£ng tham gia
‚Ä¢	Giao di·ªán (UI): Ti·∫øp nh·∫≠n thao t√°c t·ª´ qu·∫£n tr·ªã vi√™n
‚Ä¢	H·ªá th·ªëng: X·ª≠ l√Ω nghi·ªáp v·ª• qu·∫£n l√Ω t√†i kho·∫£n
‚Ä¢	C∆° s·ªü d·ªØ li·ªáu (CSDL): L∆∞u tr·ªØ th√¥ng tin t√†i kho·∫£n ng∆∞·ªùi d√πng
üîπ Lu·ªìng ch√≠nh
1.	Qu·∫£n tr·ªã vi√™n ch·ªçn ch·ª©c nƒÉng Qu·∫£n l√Ω t√†i kho·∫£n ng∆∞·ªùi d√πng tr√™n giao di·ªán.
2.	Giao di·ªán g·ª≠i y√™u c·∫ßu l·∫•y danh s√°ch t√†i kho·∫£n ƒë·∫øn H·ªá th·ªëng.
3.	H·ªá th·ªëng truy v·∫•n CSDL ƒë·ªÉ l·∫•y th√¥ng tin t√†i kho·∫£n.
4.	CSDL tr·∫£ v·ªÅ danh s√°ch t√†i kho·∫£n cho H·ªá th·ªëng.
5.	H·ªá th·ªëng hi·ªÉn th·ªã danh s√°ch t√†i kho·∫£n tr√™n giao di·ªán.
6.	Qu·∫£n tr·ªã vi√™n ch·ªçn m·ªôt t√†i kho·∫£n v√† th·ª±c hi·ªán ch·ªânh s·ª≠a th√¥ng tin.
7.	Giao di·ªán g·ª≠i d·ªØ li·ªáu c·∫≠p nh·∫≠t ƒë·∫øn H·ªá th·ªëng.
8.	H·ªá th·ªëng ki·ªÉm tra t√≠nh h·ª£p l·ªá c·ªßa d·ªØ li·ªáu.
9.	H·ªá th·ªëng c·∫≠p nh·∫≠t th√¥ng tin t√†i kho·∫£n v√†o CSDL.
10.	H·ªá th·ªëng th√¥ng b√°o c·∫≠p nh·∫≠t th√†nh c√¥ng cho qu·∫£n tr·ªã vi√™n.
üîπ Lu·ªìng ph·ª•
‚Ä¢	Lu·ªìng ph·ª• 1 ‚Äì D·ªØ li·ªáu kh√¥ng h·ª£p l·ªá
o	T·∫°i b∆∞·ªõc 8, n·∫øu d·ªØ li·ªáu kh√¥ng h·ª£p l·ªá, H·ªá th·ªëng kh√¥ng c·∫≠p nh·∫≠t CSDL v√† g·ª≠i th√¥ng b√°o l·ªói v·ªÅ giao di·ªán.
üîπ Th·ª© t·ª± message
1.	Admin ‚Üí UI: Ch·ªçn qu·∫£n l√Ω t√†i kho·∫£n
2.	UI ‚Üí System: Y√™u c·∫ßu danh s√°ch t√†i kho·∫£n
3.	System ‚Üí DB: Truy v·∫•n t√†i kho·∫£n
4.	DB ‚Üí System: Tr·∫£ v·ªÅ danh s√°ch
5.	System ‚Üí UI: Hi·ªÉn th·ªã danh s√°ch
6.	Admin ‚Üí UI: Ch·ªânh s·ª≠a t√†i kho·∫£n
7.	UI ‚Üí System: G·ª≠i d·ªØ li·ªáu c·∫≠p nh·∫≠t
8.	System ‚Üí DB: C·∫≠p nh·∫≠t t√†i kho·∫£n
9.	System ‚Üí UI: Th√¥ng b√°o k·∫øt qu·∫£
#### 10. Qu·∫£n l√Ω ƒë∆°n h√†ng
![img](public/assets/images/SE_QlyDonHang.png)
**ƒê·∫∂C T·∫¢ S∆† ƒê·ªí TU·∫¶N T·ª∞**
üîπ Actor
‚Ä¢	Qu·∫£n tr·ªã vi√™n
üîπ C√°c ƒë·ªëi t∆∞·ª£ng tham gia
‚Ä¢	Giao di·ªán (UI)
‚Ä¢	H·ªá th·ªëng
‚Ä¢	C∆° s·ªü d·ªØ li·ªáu (CSDL)
üîπ Lu·ªìng ch√≠nh
1.	Qu·∫£n tr·ªã vi√™n ch·ªçn ch·ª©c nƒÉng C·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë∆°n h√†ng.
2.	Giao di·ªán g·ª≠i tr·∫°ng th√°i m·ªõi c·ªßa ƒë∆°n h√†ng ƒë·∫øn H·ªá th·ªëng.
3.	H·ªá th·ªëng ki·ªÉm tra tr·∫°ng th√°i ƒë∆°n h√†ng c√≥ h·ª£p l·ªá hay kh√¥ng.
4.	H·ªá th·ªëng c·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë∆°n h√†ng trong CSDL.
5.	CSDL x√°c nh·∫≠n c·∫≠p nh·∫≠t th√†nh c√¥ng.
6.	H·ªá th·ªëng th√¥ng b√°o k·∫øt qu·∫£ cho qu·∫£n tr·ªã vi√™n.
üîπ Lu·ªìng ph·ª•
‚Ä¢	Lu·ªìng ph·ª• 1 ‚Äì Tr·∫°ng th√°i kh√¥ng h·ª£p l·ªá
o	T·∫°i b∆∞·ªõc 3, n·∫øu tr·∫°ng th√°i kh√¥ng h·ª£p l·ªá, H·ªá th·ªëng kh√¥ng c·∫≠p nh·∫≠t CSDL v√† hi·ªÉn th·ªã th√¥ng b√°o l·ªói.
üîπ Th·ª© t·ª± message
1.	Admin ‚Üí UI: Ch·ªçn c·∫≠p nh·∫≠t tr·∫°ng th√°i
2.	UI ‚Üí System: G·ª≠i tr·∫°ng th√°i m·ªõi
3.	System ‚Üí DB: C·∫≠p nh·∫≠t tr·∫°ng th√°i
4.	DB ‚Üí System: X√°c nh·∫≠n
5.	System ‚Üí UI: Th√¥ng b√°o k·∫øt qu·∫£
#### 11. Qu·∫£n l√Ω m√≥n ƒÉn
![img](public/assets/images/SE_QlyMonAn.png)
üîπ Actor
‚Ä¢	Qu·∫£n tr·ªã vi√™n
üîπ C√°c ƒë·ªëi t∆∞·ª£ng tham gia
‚Ä¢	Giao di·ªán (UI)
‚Ä¢	H·ªá th·ªëng
‚Ä¢	C∆° s·ªü d·ªØ li·ªáu (CSDL)
üîπ Lu·ªìng ch√≠nh
1.	Qu·∫£n tr·ªã vi√™n ch·ªçn ch·ª©c nƒÉng Th√™m m√≥n ƒÉn.
2.	Giao di·ªán hi·ªÉn th·ªã form nh·∫≠p th√¥ng tin m√≥n ƒÉn.
3.	Qu·∫£n tr·ªã vi√™n nh·∫≠p th√¥ng tin v√† g·ª≠i y√™u c·∫ßu th√™m m√≥n ƒÉn.
4.	H·ªá th·ªëng ki·ªÉm tra t√≠nh h·ª£p l·ªá c·ªßa d·ªØ li·ªáu m√≥n ƒÉn.
5.	H·ªá th·ªëng l∆∞u th√¥ng tin m√≥n ƒÉn v√†o CSDL.
6.	CSDL x√°c nh·∫≠n l∆∞u th√†nh c√¥ng.
7.	H·ªá th·ªëng th√¥ng b√°o k·∫øt qu·∫£ cho qu·∫£n tr·ªã vi√™n.
üîπ Lu·ªìng ph·ª•
‚Ä¢	Lu·ªìng ph·ª• 1 ‚Äì D·ªØ li·ªáu kh√¥ng h·ª£p l·ªá
o	T·∫°i b∆∞·ªõc 4, n·∫øu d·ªØ li·ªáu kh√¥ng h·ª£p l·ªá, H·ªá th·ªëng kh√¥ng l∆∞u CSDL v√† hi·ªÉn th·ªã th√¥ng b√°o l·ªói.
üîπ Th·ª© t·ª± message
1.	Admin ‚Üí UI: Ch·ªçn th√™m m√≥n ƒÉn
2.	UI ‚Üí System: G·ª≠i th√¥ng tin m√≥n ƒÉn
3.	System ‚Üí System: Ki·ªÉm tra d·ªØ li·ªáu
4.	System ‚Üí DB: L∆∞u m√≥n ƒÉn
5.	DB ‚Üí System: X√°c nh·∫≠n
6.	System ‚Üí UI: Th√¥ng b√°o k·∫øt qu·∫£
#### 12. Qu·∫£n l√Ω thanh to√°n

![img](public/assets/images/SE_QuanLyThanhToan.png)
**M√¥ t·∫£:**  
Cho ph√©p Admin xem danh s√°ch giao d·ªãch, x√°c nh·∫≠n tr·∫°ng th√°i thanh to√°n v√† th·ª±c hi·ªán ho√†n ti·ªÅn.

**Ti·ªÅn ƒëi·ªÅu ki·ªán:**  
Admin ƒë√£ ƒëƒÉng nh·∫≠p h·ªá th·ªëng v√† c√≥ quy·ªÅn qu·∫£n l√Ω thanh to√°n.

**H·∫≠u ƒëi·ªÅu ki·ªán:**  
Tr·∫°ng th√°i giao d·ªãch ƒë∆∞·ª£c c·∫≠p nh·∫≠t (th√†nh c√¥ng/th·∫•t b·∫°i/ho√†n ti·ªÅn) ho·∫∑c h·ªá th·ªëng th√¥ng b√°o l·ªói.

| From | To | Message |
|------|----|---------|
| Admin | UI | Ch·ªçn ch·ª©c nƒÉng qu·∫£n l√Ω thanh to√°n |
| UI | System | Y√™u c·∫ßu danh s√°ch giao d·ªãch |
| System | DB | L·∫•y danh s√°ch giao d·ªãch |
| DB | System | Tr·∫£ danh s√°ch giao d·ªãch |
| System | UI | Hi·ªÉn th·ªã danh s√°ch giao d·ªãch |
| Admin | UI | Ch·ªçn m·ªôt giao d·ªãch |
| UI | System | Y√™u c·∫ßu chi ti·∫øt giao d·ªãch |
| System | DB | L·∫•y chi ti·∫øt giao d·ªãch |
| DB | System | Tr·∫£ chi ti·∫øt giao d·ªãch |
| Admin | UI | X√°c nh·∫≠n thanh to√°n / th·∫•t b·∫°i / ho√†n ti·ªÅn |
| UI | System | G·ª≠i y√™u c·∫ßu c·∫≠p nh·∫≠t tr·∫°ng th√°i |
| System | DB | C·∫≠p nh·∫≠t tr·∫°ng th√°i giao d·ªãch |
| DB | System | Tr·∫£ k·∫øt qu·∫£ c·∫≠p nh·∫≠t |
| System | UI | Tr·∫£ th√¥ng b√°o |
| UI | Admin | Hi·ªÉn th·ªã k·∫øt qu·∫£ |
#### 13. Th·ªëng k√™ & b√°o c√°o

![img](public/assets/images/SE_ThongKeBaoCao.png)
**M√¥ t·∫£:**  
Cho ph√©p Admin xem th·ªëng k√™ doanh thu, ƒë∆°n h√†ng, m√≥n b√°n ch·∫°y v√† xu·∫•t b√°o c√°o.

**Ti·ªÅn ƒëi·ªÅu ki·ªán:**  
Admin ƒë√£ ƒëƒÉng nh·∫≠p v√† h·ªá th·ªëng c√≥ d·ªØ li·ªáu giao d·ªãch.

**H·∫≠u ƒëi·ªÅu ki·ªán:**  
B√°o c√°o ƒë∆∞·ª£c hi·ªÉn th·ªã ho·∫∑c xu·∫•t file theo y√™u c·∫ßu.

| From | To | Message |
|------|----|---------|
| Admin | UI | Ch·ªçn ch·ª©c nƒÉng th·ªëng k√™ & b√°o c√°o |
| UI | Admin | Hi·ªÉn th·ªã c√°c lo·∫°i b√°o c√°o |
| Admin | UI | Ch·ªçn lo·∫°i b√°o c√°o |
| UI | System | G·ª≠i y√™u c·∫ßu th·ªëng k√™ |
| System | System | Ki·ªÉm tra ti√™u ch√≠ |
| System | DB | T·ªïng h·ª£p d·ªØ li·ªáu th·ªëng k√™ |
| DB | System | Tr·∫£ d·ªØ li·ªáu |
| System | UI | Tr·∫£ k·∫øt qu·∫£ th·ªëng k√™ |
| UI | Admin | Hi·ªÉn th·ªã b√°o c√°o |
| Admin | UI | Xu·∫•t b√°o c√°o ho·∫∑c k·∫øt th√∫c |
#### 14. Qu·∫£n l√Ω n·ªôi dung website

![img](public/assets/images/SE_QuanLyNoiDung.png)
**M√¥ t·∫£:**  
Cho ph√©p Admin c·∫≠p nh·∫≠t th√¥ng tin website v√† qu·∫£n l√Ω banner.

**Ti·ªÅn ƒëi·ªÅu ki·ªán:**  
Admin ƒë√£ ƒëƒÉng nh·∫≠p v√† c√≥ quy·ªÅn qu·∫£n l√Ω n·ªôi dung.

**H·∫≠u ƒëi·ªÅu ki·ªán:**  
N·ªôi dung ho·∫∑c banner ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√†nh c√¥ng ho·∫∑c hi·ªÉn th·ªã th√¥ng b√°o l·ªói.

| From | To | Message |
|------|----|---------|
| Admin | UI | Ch·ªçn ch·ª©c nƒÉng qu·∫£n l√Ω n·ªôi dung |
| UI | Admin | Hi·ªÉn th·ªã giao di·ªán qu·∫£n l√Ω n·ªôi dung |
| Admin | UI | Ch·ªânh s·ª≠a th√¥ng tin / banner |
| UI | System | G·ª≠i y√™u c·∫ßu c·∫≠p nh·∫≠t |
| System | System | Ki·ªÉm tra d·ªØ li·ªáu |
| System | DB | L∆∞u d·ªØ li·ªáu n·ªôi dung |
| DB | System | Tr·∫£ k·∫øt qu·∫£ |
| System | UI | Tr·∫£ th√¥ng b√°o |
| UI | Admin | Hi·ªÉn th·ªã k·∫øt qu·∫£ |
| Admin | UI | K·∫øt th√∫c |
---

## 5. Thi·∫øt K·∫ø Ph·∫ßn M·ªÅm

## 5.1 Thi·∫øt k·∫ø ch·ª©c nƒÉng ph√≠a ng∆∞·ªùi d√πng

### 5.1.1. Qu·∫£n l√Ω t√†i kho·∫£n ng∆∞·ªùi d√πng

#### 1. ƒêƒÉng k√Ω t√†i kho·∫£n

**M√¥ t·∫£:** Ng∆∞·ªùi d√πng c√≥ th·ªÉ ƒëƒÉng k√Ω t√†i kho·∫£n m·ªõi ƒë·ªÉ s·ª≠ d·ª•ng h·ªá th·ªëng.

**Ch·ª©c nƒÉng:**

- Form ƒëƒÉng k√Ω v·ªõi c√°c tr∆∞·ªùng: H·ªç t√™n, Email (ch·ªâ ch·∫•p nh·∫≠n Gmail), M·∫≠t kh·∫©u, X√°c nh·∫≠n m·∫≠t kh·∫©u, S·ªë ƒëi·ªán tho·∫°i, ƒê·ªãa ch·ªâ
- Validation d·ªØ li·ªáu ƒë·∫ßu v√†o:
  - Email ph·∫£i l√† ƒë·ªãnh d·∫°ng Gmail (@gmail.com)
  - M·∫≠t kh·∫©u t·ªëi thi·ªÉu 6 k√Ω t·ª±
  - M·∫≠t kh·∫©u v√† x√°c nh·∫≠n m·∫≠t kh·∫©u ph·∫£i kh·ªõp
- X√°c minh email qua m√£ 6 s·ªë:
  - T·∫°o m√£ x√°c minh ng·∫´u nhi√™n 6 ch·ªØ s·ªë
  - G·ª≠i m√£ qua email s·ª≠ d·ª•ng PHPMailer (Gmail SMTP)
  - M√£ c√≥ th·ªùi h·∫°n 10 ph√∫t
  - L∆∞u m√£ v√†o database v·ªõi tr·∫°ng th√°i ch∆∞a x√°c minh
- Hash m·∫≠t kh·∫©u b·∫±ng `password_hash()` tr∆∞·ªõc khi l∆∞u v√†o database
- Ki·ªÉm tra email ƒë√£ t·ªìn t·∫°i trong h·ªá th·ªëng

**Lu·ªìng x·ª≠ l√Ω:**

```mermaid
sequenceDiagram
    participant U as Ng∆∞·ªùi d√πng
    participant S as H·ªá th·ªëng (Server)
    participant DB as Database/Session
    participant M as Mail Server

    U->>S: Nh·∫≠p th√¥ng tin & G·ª≠i
    S->>S: Validate d·ªØ li·ªáu
    S->>DB: Ki·ªÉm tra Email t·ªìn t·∫°i?
    DB-->>S: K·∫øt qu·∫£ (Ch∆∞a t·ªìn t·∫°i)
  
    S->>S: T·∫°o m√£ OTP
    S->>M: G·ª≠i Email ch·ª©a OTP
    S->>DB: L∆∞u th√¥ng tin t·∫°m & OTP v√†o Session
    S-->>U: Chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang x√°c minh
  
    U->>S: Nh·∫≠p m√£ OTP
    S->>DB: L·∫•y OTP t·ª´ Session ƒë·ªÉ so kh·ªõp
  
    alt OTP ƒë√∫ng
        S->>DB: T·∫°o t√†i kho·∫£n (Insert Database)
        S->>S: Kh·ªüi t·∫°o Session ƒëƒÉng nh·∫≠p
        S-->>U: ƒêƒÉng nh·∫≠p t·ª± ƒë·ªông th√†nh c√¥ng
    else OTP sai
        S-->>U: Th√¥ng b√°o m√£ l·ªói, y√™u c·∫ßu nh·∫≠p l·∫°i
    end
```

#### 2. ƒêƒÉng nh·∫≠p

**M√¥ t·∫£:** Ng∆∞·ªùi d√πng ƒëƒÉng nh·∫≠p v√†o h·ªá th·ªëng b·∫±ng email v√† m·∫≠t kh·∫©u.

**Ch·ª©c nƒÉng:**

- Form ƒëƒÉng nh·∫≠p v·ªõi Email v√† M·∫≠t kh·∫©u
- X√°c th·ª±c th√¥ng tin ƒëƒÉng nh·∫≠p:
  - Ki·ªÉm tra email t·ªìn t·∫°i trong database
  - Ki·ªÉm tra t√†i kho·∫£n c√≥ tr·∫°ng th√°i Active
  - X√°c th·ª±c m·∫≠t kh·∫©u b·∫±ng `password_verify()`
- L∆∞u th√¥ng tin user v√†o session:
  - `user_id` - ID ng∆∞·ªùi d√πng
  - `user` - T√™n ƒëƒÉng nh·∫≠p
  - `user_full_name` - H·ªç t√™n ƒë·∫ßy ƒë·ªß
- Redirect th√¥ng minh:
  - N·∫øu c√≥ `redirect_food_id` trong session ‚Üí chuy·ªÉn ƒë·∫øn trang ƒë·∫∑t h√†ng
  - Ng∆∞·ª£c l·∫°i ‚Üí chuy·ªÉn v·ªÅ trang ch·ªß
- Hi·ªÉn th·ªã th√¥ng b√°o l·ªói n·∫øu ƒëƒÉng nh·∫≠p th·∫•t b·∫°i

#### 3. Qu√™n m·∫≠t kh·∫©u

**M√¥ t·∫£:** Ng∆∞·ªùi d√πng c√≥ th·ªÉ kh√¥i ph·ª•c m·∫≠t kh·∫©u n·∫øu qu√™n.

**Ch·ª©c nƒÉng:**

- Form nh·∫≠p email ƒë·ªÉ y√™u c·∫ßu ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u
- G·ª≠i m√£ x√°c minh 6 s·ªë qua email
- Gi·ªõi h·∫°n s·ªë l·∫ßn th·ª≠ nh·∫≠p m√£ (5 l·∫ßn)
- M√£ x√°c minh c√≥ th·ªùi h·∫°n 10 ph√∫t
- Form ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u m·ªõi sau khi x√°c minh th√†nh c√¥ng
- Hash m·∫≠t kh·∫©u m·ªõi tr∆∞·ªõc khi c·∫≠p nh·∫≠t

**Lu·ªìng x·ª≠ l√Ω:**

```mermaid
sequenceDiagram
    participant U as Ng∆∞·ªùi d√πng
    participant FE as Frontend
    participant BE as Backend
    participant DB as Database

    U->>FE: Nh·∫≠p Email
    FE->>BE: Y√™u c·∫ßu g·ª≠i OTP
    BE-->>U: G·ª≠i m√£ OTP v·ªÅ Email
  
    U->>FE: Nh·∫≠p m√£ OTP
    FE->>BE: G·ª≠i m√£ x√°c minh
    BE->>BE: Ki·ªÉm tra m√£ kh·ªõp?
  
    alt M√£ OTP h·ª£p l·ªá
        BE-->>FE: Chuy·ªÉn h∆∞·ªõng trang ƒê·∫∑t m·∫≠t kh·∫©u
        U->>FE: Nh·∫≠p m·∫≠t kh·∫©u m·ªõi
        FE->>BE: G·ª≠i m·∫≠t kh·∫©u m·ªõi
        BE->>DB: C·∫≠p nh·∫≠t Hash m·∫≠t kh·∫©u
        DB-->>BE: X√°c nh·∫≠n c·∫≠p nh·∫≠t
        BE-->>FE: Ph·∫£n h·ªìi th√†nh c√¥ng
        FE-->>U: Hi·ªÉn th·ªã "Th√¥ng b√°o th√†nh c√¥ng"
    else M√£ OTP kh√¥ng h·ª£p l·ªá
        BE-->>FE: Th√¥ng b√°o l·ªói
        FE-->>U: Y√™u c·∫ßu nh·∫≠p l·∫°i m√£
    end
```

#### 4. ƒêƒÉng xu·∫•t

**M√¥ t·∫£:** Ng∆∞·ªùi d√πng c√≥ th·ªÉ ƒëƒÉng xu·∫•t kh·ªèi h·ªá th·ªëng.

**Ch·ª©c nƒÉng:**

- X√≥a t·∫•t c·∫£ session c·ªßa ng∆∞·ªùi d√πng
- Chuy·ªÉn h∆∞·ªõng v·ªÅ trang ch·ªß
- Hi·ªÉn th·ªã th√¥ng b√°o ƒëƒÉng xu·∫•t th√†nh c√¥ng

---

### 5.1.2. Duy·ªát v√† t√¨m ki·∫øm m√≥n ƒÉn

#### 1. Trang ch·ªß

**M√¥ t·∫£:** Hi·ªÉn th·ªã th√¥ng tin t·ªïng quan v·ªÅ h·ªá th·ªëng v√† m√≥n ƒÉn n·ªïi b·∫≠t.

**Ch·ª©c nƒÉng:**

- Hi·ªÉn th·ªã form t√¨m ki·∫øm m√≥n ƒÉn
- Hi·ªÉn th·ªã 3 danh m·ª•c ƒë·∫ßu ti√™n v·ªõi h√¨nh ·∫£nh
- Hi·ªÉn th·ªã 6 m√≥n ƒÉn ƒë·∫ßu ti√™n trong menu
- M·ªói m√≥n ƒÉn hi·ªÉn th·ªã: T√™n, Gi√°, M√¥ t·∫£, H√¨nh ·∫£nh
- N√∫t "Th√™m v√†o gi·ªè" n·∫øu ƒë√£ ƒëƒÉng nh·∫≠p, "ƒê·∫∑t ngay" n·∫øu ch∆∞a ƒëƒÉng nh·∫≠p
- Link "Xem t·∫•t c·∫£ m√≥n ƒÉn" ƒë·ªÉ xem to√†n b·ªô menu

#### 2. Xem danh s√°ch m√≥n ƒÉn

**M√¥ t·∫£:** Hi·ªÉn th·ªã to√†n b·ªô m√≥n ƒÉn trong h·ªá th·ªëng.

**Ch·ª©c nƒÉng:**

- Hi·ªÉn th·ªã t·∫•t c·∫£ m√≥n ƒÉn c√≥ trong database
- M·ªói m√≥n ƒÉn hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß th√¥ng tin: T√™n, Gi√°, M√¥ t·∫£, H√¨nh ·∫£nh
- N√∫t th√™m v√†o gi·ªè h√†ng (y√™u c·∫ßu ƒëƒÉng nh·∫≠p)
- Responsive design cho mobile

#### 3. Xem m√≥n ƒÉn theo danh m·ª•c

**M√¥ t·∫£:** L·ªçc v√† hi·ªÉn th·ªã m√≥n ƒÉn theo t·ª´ng danh m·ª•c.

**Ch·ª©c nƒÉng:**

- Hi·ªÉn th·ªã danh s√°ch t·∫•t c·∫£ danh m·ª•c
- Khi click v√†o danh m·ª•c, hi·ªÉn th·ªã c√°c m√≥n ƒÉn thu·ªôc danh m·ª•c ƒë√≥
- Hi·ªÉn th·ªã th√¥ng b√°o n·∫øu danh m·ª•c ch∆∞a c√≥ m√≥n ƒÉn

#### 4. T√¨m ki·∫øm m√≥n ƒÉn

**M√¥ t·∫£:** T√¨m ki·∫øm m√≥n ƒÉn theo t·ª´ kh√≥a.

**Ch·ª©c nƒÉng:**

- Form t√¨m ki·∫øm v·ªõi √¥ nh·∫≠p t·ª´ kh√≥a
- T√¨m ki·∫øm trong t√™n m√≥n ƒÉn (`title`) v√† m√¥ t·∫£ (`description`)
- Hi·ªÉn th·ªã k·∫øt qu·∫£ t√¨m ki·∫øm v·ªõi ƒë·∫ßy ƒë·ªß th√¥ng tin m√≥n ƒÉn
- Hi·ªÉn th·ªã th√¥ng b√°o n·∫øu kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£

**Lu·ªìng x·ª≠ l√Ω:**

```mermaid
sequenceDiagram
    participant U as Ng∆∞·ªùi d√πng
    participant F as Form Giao di·ªán
    participant DB as C∆° s·ªü d·ªØ li·ªáu

    U->>F: Nh·∫≠p t·ª´ kh√≥a b·∫•m Submit
    F->>DB: G·ª≠i truy v·∫•n (Query)
    DB-->>F: Tr·∫£ v·ªÅ d·ªØ li·ªáu
    F-->>U: Hi·ªÉn th·ªã k·∫øt qu·∫£ t√¨m ki·∫øm
```

---

### 5.1.3. Qu·∫£n l√Ω gi·ªè h√†ng

#### 1. Th√™m m√≥n v√†o gi·ªè h√†ng

**M√¥ t·∫£:** Ng∆∞·ªùi d√πng c√≥ th·ªÉ th√™m m√≥n ƒÉn v√†o gi·ªè h√†ng.

**Ch·ª©c nƒÉng:**

- N√∫t "Th√™m v√†o gi·ªè" tr√™n m·ªói m√≥n ƒÉn
- Y√™u c·∫ßu ƒëƒÉng nh·∫≠p tr∆∞·ªõc khi th√™m v√†o gi·ªè
- Th√™m m√≥n v√†o gi·ªè h√†ng qua AJAX (kh√¥ng reload trang)
- Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng khi th√™m v√†o gi·ªè
- C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng m√≥n trong gi·ªè h√†ng (badge)
- N·∫øu m√≥n ƒë√£ c√≥ trong gi·ªè, tƒÉng s·ªë l∆∞·ª£ng thay v√¨ t·∫°o m·ªõi

#### 2. Xem gi·ªè h√†ng

**M√¥ t·∫£:** Hi·ªÉn th·ªã danh s√°ch m√≥n ƒÉn trong gi·ªè h√†ng.

**Ch·ª©c nƒÉng:**

- Hi·ªÉn th·ªã danh s√°ch m√≥n ƒÉn trong gi·ªè h√†ng:
  - H√¨nh ·∫£nh m√≥n ƒÉn
  - T√™n m√≥n ƒÉn
  - Gi√° ƒë∆°n v·ªã
  - S·ªë l∆∞·ª£ng (c√≥ th·ªÉ tƒÉng/gi·∫£m)
  - Ghi ch√∫ cho m√≥n ƒÉn (VD: ƒÉn cay, kh√¥ng cay, nhi·ªÅu, √≠t...)
  - T·ªïng ti·ªÅn cho m·ªói m√≥n
- T√≠nh t·ªïng ti·ªÅn to√†n b·ªô gi·ªè h√†ng
- N√∫t tƒÉng/gi·∫£m s·ªë l∆∞·ª£ng
- N√∫t x√≥a m√≥n kh·ªèi gi·ªè h√†ng
- √î nh·∫≠p ghi ch√∫ cho t·ª´ng m√≥n
- N√∫t "Thanh to√°n" ƒë·ªÉ chuy·ªÉn ƒë·∫øn trang checkout
- Hi·ªÉn th·ªã th√¥ng b√°o n·∫øu gi·ªè h√†ng tr·ªëng

**Lu·ªìng x·ª≠ l√Ω:**

```mermaid
sequenceDiagram
    participant U as Ng∆∞·ªùi d√πng
    participant B as Tr√¨nh duy·ªát (Frontend)
    participant S as Server (get-cart.php)
    participant DB as Database

    U->>B: Truy c·∫≠p trang Gi·ªè h√†ng
    B->>S: G·ª≠i request l·∫•y d·ªØ li·ªáu gi·ªè h√†ng
    S->>DB: Truy v·∫•n danh s√°ch s·∫£n ph·∫©m
    DB-->>S: Tr·∫£ v·ªÅ d·ªØ li·ªáu s·∫£n ph·∫©m
    S-->>B: Tr·∫£ v·ªÅ JSON (List items)
  
    Note over B: X·ª≠ l√Ω hi·ªÉn th·ªã danh s√°ch
    B->>B: Render danh s√°ch m√≥n
    B->>B: T√≠nh to√°n T·ªïng ti·ªÅn (Subtotal)
  
    B-->>U: Hi·ªÉn th·ªã giao di·ªán & N√∫t thanh to√°n

```

---

### 5.1.4. ƒê·∫∑t h√†ng v√† thanh to√°n

#### 1. Thanh to√°n (Checkout)

**M√¥ t·∫£:** Ng∆∞·ªùi d√πng ƒëi·ªÅn th√¥ng tin giao h√†ng v√† x√°c nh·∫≠n ƒë·∫∑t h√†ng.

**Ch·ª©c nƒÉng:**

- Form nh·∫≠p th√¥ng tin giao h√†ng:
  - H·ªç t√™n ng∆∞·ªùi nh·∫≠n (t·ª± ƒë·ªông ƒëi·ªÅn t·ª´ th√¥ng tin user)
  - S·ªë ƒëi·ªán tho·∫°i (t·ª± ƒë·ªông ƒëi·ªÅn)
  - Email (t·ª± ƒë·ªông ƒëi·ªÅn)
  - ƒê·ªãa ch·ªâ giao h√†ng (t·ª± ƒë·ªông ƒëi·ªÅn)
- Hi·ªÉn th·ªã t√≥m t·∫Øt ƒë∆°n h√†ng:
  - Danh s√°ch m√≥n ƒÉn, s·ªë l∆∞·ª£ng, ghi ch√∫
  - T·ªïng ti·ªÅn ƒë∆°n h√†ng
- Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n:
  - Ti·ªÅn m·∫∑t (COD)
  - Thanh to√°n online
- T·∫°o m√£ ƒë∆°n h√†ng duy nh·∫•t:
  - Format: `ORD` + `YYYYMMDD` + `6 k√Ω t·ª± ng·∫´u nhi√™n`
  - V√≠ d·ª•: `ORD20241215ABC123`
- X·ª≠ l√Ω ƒë·∫∑t h√†ng:
  - T·∫°o ƒë∆°n h√†ng cho t·ª´ng m√≥n trong gi·ªè
  - L∆∞u th√¥ng tin ƒë∆°n h√†ng v√†o database
  - X√≥a gi·ªè h√†ng sau khi ƒë·∫∑t h√†ng th√†nh c√¥ng
  - N·∫øu thanh to√°n online ‚Üí chuy·ªÉn ƒë·∫øn trang payment
  - N·∫øu thanh to√°n ti·ªÅn m·∫∑t ‚Üí chuy·ªÉn ƒë·∫øn trang l·ªãch s·ª≠ ƒë∆°n h√†ng

**Lu·ªìng x·ª≠ l√Ω:**

```mermaid
sequenceDiagram
    participant U as Ng∆∞·ªùi d√πng
    participant FE as Frontend (Giao di·ªán)
    participant BE as Backend (Server)
    participant DB as Database

    U->>FE: Click "Thanh to√°n"
    FE->>U: Hi·ªÉn th·ªã Form th√¥ng tin & PTTT
    U->>FE: ƒêi·ªÅn th√¥ng tin & Click "X√°c nh·∫≠n"
  
    FE->>BE: G·ª≠i y√™u c·∫ßu ƒë·∫∑t h√†ng (Order Request)
  
    activate BE
    BE->>BE: T·∫°o m√£ ƒë∆°n h√†ng (Order ID)
    BE->>DB: L∆∞u th√¥ng tin ƒë∆°n h√†ng & Chi ti·∫øt m√≥n
    BE->>DB: X√≥a d·ªØ li·ªáu gi·ªè h√†ng (Clear Cart)
    deactivate BE
  
    alt Thanh to√°n Online
        BE-->>FE: Tr·∫£ v·ªÅ URL thanh to√°n
        FE-->>U: Chuy·ªÉn h∆∞·ªõng ƒë·∫øn C·ªïng thanh to√°n
    else Thanh to√°n khi nh·∫≠n h√†ng (COD)
        BE-->>FE: Tr·∫£ v·ªÅ tr·∫°ng th√°i Th√†nh c√¥ng
        FE-->>U: Chuy·ªÉn ƒë·∫øn trang "C·∫£m ∆°n/Ho√†n t·∫•t"
    end

```

#### 2. L·ªãch s·ª≠ ƒë·∫∑t h√†ng

**M√¥ t·∫£:** Ng∆∞·ªùi d√πng xem l·ªãch s·ª≠ c√°c ƒë∆°n h√†ng ƒë√£ ƒë·∫∑t.

**Ch·ª©c nƒÉng:**

- Hi·ªÉn th·ªã danh s√°ch ƒë∆°n h√†ng c·ªßa user:
  - M√£ ƒë∆°n h√†ng (c√≥ n√∫t copy)
  - Ng√†y ƒë·∫∑t h√†ng
  - Tr·∫°ng th√°i ƒë∆°n h√†ng (m√†u s·∫Øc kh√°c nhau):
    - ƒê√£ ƒë·∫∑t h√†ng (Ordered) - m√†u v√†ng
    - ƒêang giao h√†ng (On Delivery) - m√†u cam
    - ƒê√£ giao h√†ng (Delivered) - m√†u xanh l√°
    - ƒê√£ h·ªßy (Cancelled) - m√†u ƒë·ªè
  - Th√¥ng tin m√≥n ƒÉn: T√™n, S·ªë l∆∞·ª£ng, ƒê∆°n gi√°, T·ªïng ti·ªÅn
  - Th√¥ng tin giao h√†ng: T√™n ng∆∞·ªùi nh·∫≠n, ƒê·ªãa ch·ªâ
- N√∫t "Chat h·ªó tr·ª£ ƒë∆°n n√†y" ƒë·ªÉ li√™n h·ªá admin v·ªÅ ƒë∆°n h√†ng c·ª• th·ªÉ
- Hi·ªÉn th·ªã th√¥ng b√°o n·∫øu ch∆∞a c√≥ ƒë∆°n h√†ng n√†o

---

### 5.1.5. H·ªá th·ªëng chat v·ªõi Admin

#### 1. Chat v·ªõi Admin

**M√¥ t·∫£:** Ng∆∞·ªùi d√πng c√≥ th·ªÉ chat v·ªõi admin ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£.

**Ch·ª©c nƒÉng:**

- Giao di·ªán chat real-time:
  - Hi·ªÉn th·ªã tin nh·∫Øn ƒë√£ g·ª≠i/nh·∫≠n
  - Ph√¢n bi·ªát tin nh·∫Øn c·ªßa user v√† admin (m√†u s·∫Øc kh√°c nhau)
  - Hi·ªÉn th·ªã th·ªùi gian g·ª≠i tin nh·∫Øn
  - T·ª± ƒë·ªông scroll xu·ªëng tin nh·∫Øn m·ªõi nh·∫•t
- G·ª≠i tin nh·∫Øn:
  - Form nh·∫≠p tin nh·∫Øn
  - G·ª≠i tin nh·∫Øn qua AJAX (kh√¥ng reload trang)
  - Hi·ªÉn th·ªã tin nh·∫Øn ngay sau khi g·ª≠i
- Nh·∫≠n tin nh·∫Øn:
  - Polling m·ªói 2 gi√¢y ƒë·ªÉ l·∫•y tin nh·∫Øn m·ªõi
  - T·ª± ƒë·ªông hi·ªÉn th·ªã tin nh·∫Øn m·ªõi t·ª´ admin
  - ƒê√°nh d·∫•u tin nh·∫Øn ƒë√£ ƒë·ªçc khi m·ªü trang chat
- Chat v·ªÅ ƒë∆°n h√†ng c·ª• th·ªÉ:
  - C√≥ th·ªÉ truy·ªÅn `order_code` qua URL
  - Hi·ªÉn th·ªã th√¥ng b√°o v·ªÅ ƒë∆°n h√†ng ƒëang chat
  - N√∫t ch√®n m√£ ƒë∆°n h√†ng v√†o tin nh·∫Øn
- Badge th√¥ng b√°o s·ªë tin nh·∫Øn ch∆∞a ƒë·ªçc (trong menu)

**Lu·ªìng x·ª≠ l√Ω:**

```mermaid
sequenceDiagram
    participant U as User (Frontend)
    participant S as Server/DB
    participant A as Admin (Dashboard)

    U->>S: Load trang & L·∫•y tin nh·∫Øn c≈©
    S-->>U: Tr·∫£ v·ªÅ danh s√°ch tin nh·∫Øn
  
    Note over U: B·∫Øt ƒë·∫ßu v√≤ng l·∫∑p Polling (m·ªói 3-5s)
  
    U->>S: [POST] G·ª≠i tin nh·∫Øn m·ªõi
    S->>S: L∆∞u v√†o Database
    S-->>U: X√°c nh·∫≠n th√†nh c√¥ng
    Note right of U: Hi·ªÉn th·ªã tin nh·∫Øn v·ª´a g·ª≠i l√™n giao di·ªán
  
    A->>S: [POST] Admin tr·∫£ l·ªùi tin nh·∫Øn
    S->>S: L∆∞u tin nh·∫Øn c·ªßa Admin
  
    loop ƒê·ªãnh k·ª≥ (Polling)
        U->>S: [GET] Ki·ªÉm tra tin nh·∫Øn m·ªõi?
        S-->>U: Tr·∫£ v·ªÅ tin nh·∫Øn m·ªõi c·ªßa Admin
    end
  
    U->>U: Render tin nh·∫Øn c·ªßa Admin l√™n m√†n h√¨nh

```

### 5.1.6 Trang Thanh To√°n

**M·ª•c ƒë√≠ch:** Cho ph√©p ng∆∞·ªùi d√πng thanh to√°n ƒë∆°n h√†ng online v·ªõi nhi·ªÅu ph∆∞∆°ng th·ª©c thanh to√°n.

**C√°c ch·ª©c nƒÉng ch√≠nh:**

1. **Hi·ªÉn th·ªã th√¥ng tin ƒë∆°n h√†ng**

   - Hi·ªÉn th·ªã m√£ ƒë∆°n h√†ng (`order_code`)
   - Hi·ªÉn th·ªã t·ªïng ti·ªÅn c·∫ßn thanh to√°n
   - Ki·ªÉm tra v√† hi·ªÉn th·ªã tr·∫°ng th√°i thanh to√°n hi·ªán t·∫°i
2. **Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n**

   - **MoMo**: V√≠ ƒëi·ªán t·ª≠ MoMo (m·∫∑c ƒë·ªãnh)
   - **Bank**: Chuy·ªÉn kho·∫£n ng√¢n h√†ng
   - Giao di·ªán radio buttons v·ªõi icons tr·ª±c quan
3. **Countdown Timer**

   - Hi·ªÉn th·ªã th·ªùi gian c√≤n l·∫°i (15 ph√∫t)
   - T·ª± ƒë·ªông disable n√∫t thanh to√°n khi h·∫øt h·∫°n
   - C·∫£nh b√°o khi phi√™n thanh to√°n s·∫Øp h·∫øt h·∫°n
4. **X·ª≠ l√Ω thanh to√°n**

   - Validate form tr∆∞·ªõc khi submit
   - T·∫°o/update payment record
   - X·ª≠ l√Ω thanh to√°n (hi·ªán t·∫°i m√¥ ph·ªèng)
   - Redirect ƒë·∫øn l·ªãch s·ª≠ ƒë∆°n h√†ng sau khi th√†nh c√¥ng

**Lu·ªìng x·ª≠ l√Ω:**

```mermaid
sequenceDiagram
    participant U as User
    participant B as Browser
    participant S as Server (PHP)
    participant DB as Database

    U->>B: Truy c·∫≠p payment.php
    B->>S: G·ª≠i order_code
    S->>S: Ki·ªÉm tra Session User
    S->>DB: Query Order + Payment info
    DB-->>S: Tr·∫£ v·ªÅ d·ªØ li·ªáu
  
    alt Ki·ªÉm tra th·∫•t b·∫°i
        S-->>B: Hi·ªÉn th·ªã l·ªói (ƒê∆°n kh√¥ng t·ªìn t·∫°i/ƒê√£ thanh to√°n)
    else Ki·ªÉm tra h·ª£p l·ªá
        S-->>B: Tr·∫£ v·ªÅ Form thanh to√°n & Timer
    end
  
    U->>B: Ch·ªçn ph∆∞∆°ng th·ª©c & X√°c nh·∫≠n
    B->>S: POST payment_method
  
    Note over S,DB: B·∫Øt ƒë·∫ßu giao d·ªãch (Transaction)
    S->>DB: L∆∞u Payment Record (Status: pending)
    S->>S: X·ª≠ l√Ω m√¥ ph·ªèng Gateway
    S->>DB: Update Payment: success
    S->>DB: Update Order: paid / status: Ordered
    Note over S,DB: K·∫øt th√∫c giao d·ªãch
  
    S-->>B: Redirect order-history.php
    B-->>U: Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng

```

**T√≠nh nƒÉng b·∫£o m·∫≠t:**

- Session validation - ch·ªâ user s·ªü h·ªØu ƒë∆°n h√†ng m·ªõi thanh to√°n ƒë∆∞·ª£c
- Prepared statements - ngƒÉn ch·∫∑n SQL injection
- Input validation - ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
- Double submission prevention - disable button sau khi submit
- Output buffering - tr√°nh l·ªói header khi redirect

**T√≠nh nƒÉng UX:**

- Real-time countdown timer
- Visual feedback khi submit (button disabled, text "ƒêang x·ª≠ l√Ω...")
- Error messages r√µ r√†ng
- Responsive design

#### 1.1.2. X·ª≠ L√Ω L·ªói v√† Edge Cases

1. **ƒê∆°n h√†ng kh√¥ng t·ªìn t·∫°i**

   - Redirect ƒë·∫øn order-history v·ªõi th√¥ng b√°o l·ªói
2. **ƒê∆°n h√†ng ƒë√£ thanh to√°n**

   - Hi·ªÉn th·ªã th√¥ng b√°o v√† redirect
3. **Phi√™n thanh to√°n h·∫øt h·∫°n**

   - T·ª± ƒë·ªông set status = 'cancelled'
   - Hi·ªÉn th·ªã warning v√† cho ph√©p t·∫°o l·∫°i
4. **Payment record ƒë√£ t·ªìn t·∫°i nh∆∞ng ch∆∞a h·∫øt h·∫°n**

   - Hi·ªÉn th·ªã th√¥ng tin payment hi·ªán t·∫°i
   - Cho ph√©p ti·∫øp t·ª•c thanh to√°n

---

## 5.2 Thi·∫øt k·∫ø ch·ª©c nƒÉng ph√≠a qu·∫£n tr·ªã vi√™n

### 5.2.1 Thi·∫øt k·∫ø ch·ª©c nƒÉng ph√≠a qu·∫£n tr·ªã vi√™n

### 1. Qu·∫£n l√Ω t√†i kho·∫£n Admin

#### 1.1 ƒêƒÉng nh·∫≠p Admin

  **M√¥ t·∫£:** Admin ƒëƒÉng nh·∫≠p v√†o h·ªá th·ªëng qu·∫£n tr·ªã.

  **Ch·ª©c nƒÉng:**

- Form ƒëƒÉng nh·∫≠p v·ªõi Username v√† Password
- X√°c th·ª±c th√¥ng tin ƒëƒÉng nh·∫≠p
- L∆∞u th√¥ng tin admin v√†o session
- Ph√¢n quy·ªÅn: Ch·ªâ admin m·ªõi truy c·∫≠p ƒë∆∞·ª£c admin panel
- Redirect v·ªÅ trang ch·ªß n·∫øu ƒëƒÉng nh·∫≠p th·∫•t b·∫°i

#### 1.2 Qu·∫£n l√Ω Admin

  **M√¥ t·∫£:** Qu·∫£n l√Ω danh s√°ch qu·∫£n tr·ªã vi√™n trong h·ªá th·ªëng.

  **Ch·ª©c nƒÉng:**

- Xem danh s√°ch t·∫•t c·∫£ admin:
  - STT
  - H·ªç t√™n
  - T√™n ƒëƒÉng nh·∫≠p
- Th√™m admin m·ªõi:
  - Form nh·∫≠p th√¥ng tin: H·ªç t√™n, Username, Password
  - Hash m·∫≠t kh·∫©u tr∆∞·ªõc khi l∆∞u
- C·∫≠p nh·∫≠t th√¥ng tin admin:
  - Form s·ª≠a th√¥ng tin admin
  - C√≥ th·ªÉ ƒë·ªïi m·∫≠t kh·∫©u
- X√≥a admin:
  - X√°c nh·∫≠n tr∆∞·ªõc khi x√≥a
  - Kh√¥ng cho ph√©p x√≥a ch√≠nh m√¨nh

---

### 2. B·∫£ng ƒëi·ªÅu khi·ªÉn (Dashboard)

#### 2.1 Dashboard t·ªïng quan

  **M√¥ t·∫£:** Hi·ªÉn th·ªã th√¥ng tin t·ªïng quan v·ªÅ h·ªá th·ªëng.

  **Ch·ª©c nƒÉng:**

- Th·ªëng k√™ s·ªë li·ªáu:

  - T·ªïng s·ªë danh m·ª•c
  - T·ªïng s·ªë m√≥n ƒÉn
  - T·ªïng s·ªë ƒë∆°n h√†ng
  - T·ªïng doanh thu (t·ª´ c√°c ƒë∆°n ƒë√£ giao h√†ng)
- Bi·ªÉu ƒë·ªì th·ªëng k√™:

  - Bi·ªÉu ƒë·ªì c·ªôt: So s√°nh s·ªë l∆∞·ª£ng danh m·ª•c, m√≥n ƒÉn, ƒë∆°n h√†ng
  - Bi·ªÉu ƒë·ªì ƒë∆∞·ªùng: Doanh thu theo th·ªùi gian (7 ng√†y g·∫ßn nh·∫•t)
- Hi·ªÉn th·ªã th√¥ng b√°o khi ƒëƒÉng nh·∫≠p th√†nh c√¥ng

  **S∆° ƒë·ªì Dashboard:**

```mermaid
  graph TD
      A[Dashboard] --> B[Th·ªëng k√™ s·ªë li·ªáu]
      A --> C[Bi·ªÉu ƒë·ªì th·ªëng k√™]
  
      B --> B1[T·ªïng s·ªë danh m·ª•c]
      B --> B2[T·ªïng s·ªë m√≥n ƒÉn]
      B --> B3[T·ªïng s·ªë ƒë∆°n h√†ng]
      B --> B4[T·ªïng doanh thu]
  
      C --> C1[Bi·ªÉu ƒë·ªì c·ªôt: So s√°nh s·ªë li·ªáu]
      C --> C2[Bi·ªÉu ƒë·ªì ƒë∆∞·ªùng: Doanh thu theo th·ªùi gian]
```

---

### 3. Qu·∫£n l√Ω danh m·ª•c m√≥n ƒÉn

#### 3.1 Xem danh s√°ch danh m·ª•c

  **M√¥ t·∫£:** Hi·ªÉn th·ªã danh s√°ch t·∫•t c·∫£ danh m·ª•c m√≥n ƒÉn.

  **Ch·ª©c nƒÉng:**

- Hi·ªÉn th·ªã b·∫£ng danh s√°ch danh m·ª•c:
  - STT
  - T√™n danh m·ª•c
  - H√¨nh ·∫£nh (thumbnail)
  - Tr·∫°ng th√°i n·ªïi b·∫≠t (Featured)
  - Tr·∫°ng th√°i ho·∫°t ƒë·ªông (Active)
- N√∫t "Th√™m danh m·ª•c" ƒë·ªÉ t·∫°o m·ªõi

#### 3.2 Th√™m danh m·ª•c

  **M√¥ t·∫£:** T·∫°o danh m·ª•c m√≥n ƒÉn m·ªõi.

  **Ch·ª©c nƒÉng:**

- Form nh·∫≠p th√¥ng tin:

  - T√™n danh m·ª•c (b·∫Øt bu·ªôc)
  - Upload h√¨nh ·∫£nh danh m·ª•c
  - Ch·ªçn tr·∫°ng th√°i n·ªïi b·∫≠t (Yes/No)
  - Ch·ªçn tr·∫°ng th√°i ho·∫°t ƒë·ªông (Yes/No)
- Validation:

  - T√™n danh m·ª•c kh√¥ng ƒë∆∞·ª£c tr·ªëng
  - H√¨nh ·∫£nh ph·∫£i l√† file ·∫£nh h·ª£p l·ªá
- X·ª≠ l√Ω upload h√¨nh ·∫£nh:

  - L∆∞u v√†o th∆∞ m·ª•c `image/category/`
  - ƒê·∫∑t t√™n file t·ª± ƒë·ªông ho·∫∑c gi·ªØ nguy√™n t√™n
- L∆∞u th√¥ng tin v√†o database
- Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng/th·∫•t b·∫°i

  **Lu·ªìng x·ª≠ l√Ω:**

```mermaid
sequenceDiagram
    participant U as Ng∆∞·ªùi d√πng
    participant FE as Frontend (Browser)
    participant BE as Backend (Server)
    participant ST as Storage (Th∆∞ m·ª•c/Cloud)
    participant DB as Database

    U->>FE: Nh·∫≠p li·ªáu & Ch·ªçn file ·∫£nh
    FE->>BE: G·ª≠i Form Data (Th√¥ng tin + File)
  
    BE->>BE: Validate (ƒê·ªãnh d·∫°ng ·∫£nh, dung l∆∞·ª£ng...)
  
    alt H·ª£p l·ªá
        BE->>ST: L∆∞u file ·∫£nh v√†o th∆∞ m·ª•c
        ST-->>BE: Tr·∫£ v·ªÅ ƒë∆∞·ªùng d·∫´n ·∫£nh (Image Path)
  
        BE->>DB: L∆∞u th√¥ng tin + Path ·∫£nh v√†o DB
        DB-->>BE: X√°c nh·∫≠n l∆∞u th√†nh c√¥ng
  
        BE-->>FE: Ph·∫£n h·ªìi Th√†nh c√¥ng
        FE-->>U: Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng
        FE->>FE: Chuy·ªÉn h∆∞·ªõng v·ªÅ Trang qu·∫£n l√Ω
    else Kh√¥ng h·ª£p l·ªá
        BE-->>FE: Tr·∫£ v·ªÅ l·ªói Validation
        FE-->>U: Hi·ªÉn th·ªã th√¥ng b√°o l·ªói
    end
  
```

#### 3.3 C·∫≠p nh·∫≠t danh m·ª•c

  **M√¥ t·∫£:** S·ª≠a th√¥ng tin danh m·ª•c m√≥n ƒÉn.

  **Ch·ª©c nƒÉng:**

- Form s·ª≠a th√¥ng tin (t∆∞∆°ng t·ª± form th√™m)
- Hi·ªÉn th·ªã th√¥ng tin hi·ªán t·∫°i c·ªßa danh m·ª•c
- Cho ph√©p thay ƒë·ªïi:
  - T√™n danh m·ª•c
  - H√¨nh ·∫£nh (c√≥ th·ªÉ gi·ªØ nguy√™n ho·∫∑c upload m·ªõi)
  - Tr·∫°ng th√°i n·ªïi b·∫≠t
  - Tr·∫°ng th√°i ho·∫°t ƒë·ªông
- X√≥a h√¨nh ·∫£nh c≈© n·∫øu upload h√¨nh ·∫£nh m·ªõi
- C·∫≠p nh·∫≠t th√¥ng tin v√†o database

#### 3.4 X√≥a danh m·ª•c

  **M√¥ t·∫£:** X√≥a danh m·ª•c m√≥n ƒÉn kh·ªèi h·ªá th·ªëng.

  **Ch·ª©c nƒÉng:**

- X√°c nh·∫≠n tr∆∞·ªõc khi x√≥a
- X√≥a h√¨nh ·∫£nh danh m·ª•c kh·ªèi server
- X√≥a b·∫£n ghi trong database
- Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng/th·∫•t b·∫°i
- L∆∞u √Ω: C·∫ßn x·ª≠ l√Ω c√°c m√≥n ƒÉn thu·ªôc danh m·ª•c n√†y (chuy·ªÉn sang danh m·ª•c kh√°c ho·∫∑c x√≥a lu√¥n)

---

### 4. Qu·∫£n l√Ω m√≥n ƒÉn

#### 4.1 Xem danh s√°ch m√≥n ƒÉn

  **M√¥ t·∫£:** Hi·ªÉn th·ªã danh s√°ch t·∫•t c·∫£ m√≥n ƒÉn trong h·ªá th·ªëng.

  **Ch·ª©c nƒÉng:**

- Hi·ªÉn th·ªã b·∫£ng danh s√°ch m√≥n ƒÉn:
  - STT
  - T√™n m√≥n ƒÉn
  - Gi√°
  - H√¨nh ·∫£nh (thumbnail)
  - Tr·∫°ng th√°i n·ªïi b·∫≠t (Featured)
  - Tr·∫°ng th√°i ho·∫°t ƒë·ªông (Active)
- N√∫t "Th√™m m√≥n ƒÉn" ƒë·ªÉ t·∫°o m·ªõi
- N√∫t "C·∫≠p nh·∫≠t" v√† "X√≥a" cho m·ªói m√≥n ƒÉn

#### 4.2 Th√™m m√≥n ƒÉn

  **M√¥ t·∫£:** T·∫°o m√≥n ƒÉn m·ªõi trong h·ªá th·ªëng.

  **Ch·ª©c nƒÉng:**

- Form nh·∫≠p th√¥ng tin:

  - T√™n m√≥n ƒÉn (b·∫Øt bu·ªôc)
  - M√¥ t·∫£ m√≥n ƒÉn
  - Gi√° (b·∫Øt bu·ªôc, ph·∫£i l√† s·ªë)
  - Ch·ªçn danh m·ª•c (dropdown t·ª´ danh s√°ch danh m·ª•c)
  - Upload h√¨nh ·∫£nh m√≥n ƒÉn
  - Ch·ªçn tr·∫°ng th√°i n·ªïi b·∫≠t (Yes/No)
  - Ch·ªçn tr·∫°ng th√°i ho·∫°t ƒë·ªông (Yes/No)
- Validation:

  - T√™n m√≥n ƒÉn kh√¥ng ƒë∆∞·ª£c tr·ªëng
  - Gi√° ph·∫£i l√† s·ªë d∆∞∆°ng
  - Ph·∫£i ch·ªçn danh m·ª•c
  - H√¨nh ·∫£nh ph·∫£i l√† file ·∫£nh h·ª£p l·ªá
- X·ª≠ l√Ω upload h√¨nh ·∫£nh:

  - L∆∞u v√†o th∆∞ m·ª•c `image/food/`
  - ƒê·∫∑t t√™n file t·ª± ƒë·ªông
- L∆∞u th√¥ng tin v√†o database
- Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng/th·∫•t b·∫°i

  **Lu·ªìng x·ª≠ l√Ω:**

```mermaid
sequenceDiagram
    participant U as Ng∆∞·ªùi d√πng
    participant FE as Frontend
    participant BE as Backend
    participant ST as Storage (Th∆∞ m·ª•c ·∫£nh)
    participant DB as Database

    U->>FE: ƒêi·ªÅn form & Ch·ªçn ·∫£nh
    FE->>BE: G·ª≠i Request (FormData)
  
    Note over BE: Ki·ªÉm tra t√≠nh h·ª£p l·ªá (Validate)
  
    alt D·ªØ li·ªáu h·ª£p l·ªá
        BE->>ST: L∆∞u file ·∫£nh v√†o server
        ST-->>BE: Tr·∫£ v·ªÅ t√™n file/ƒë∆∞·ªùng d·∫´n
  
        BE->>DB: INSERT d·ªØ li·ªáu (k√®m ID danh m·ª•c & Path ·∫£nh)
        DB-->>BE: X√°c nh·∫≠n th√†nh c√¥ng
  
        BE-->>FE: Tr·∫£ v·ªÅ m√£ th√†nh c√¥ng (200 OK)
        FE-->>U: Hi·ªÉn th·ªã Popup th√¥ng b√°o
        FE->>FE: Chuy·ªÉn h∆∞·ªõng ƒë·∫øn /quan-ly
    else D·ªØ li·ªáu kh√¥ng h·ª£p l·ªá
        BE-->>FE: Tr·∫£ v·ªÅ th√¥ng b√°o l·ªói
        FE-->>U: Hi·ªÉn th·ªã l·ªói cho ng∆∞·ªùi d√πng
    end
  
```

#### 4.3 C·∫≠p nh·∫≠t m√≥n ƒÉn

  **M√¥ t·∫£:** S·ª≠a th√¥ng tin m√≥n ƒÉn.

  **Ch·ª©c nƒÉng:**

- Form s·ª≠a th√¥ng tin (t∆∞∆°ng t·ª± form th√™m)
- Hi·ªÉn th·ªã th√¥ng tin hi·ªán t·∫°i c·ªßa m√≥n ƒÉn
- Cho ph√©p thay ƒë·ªïi t·∫•t c·∫£ th√¥ng tin:
  - T√™n m√≥n ƒÉn
  - M√¥ t·∫£
  - Gi√°
  - Danh m·ª•c
  - H√¨nh ·∫£nh (c√≥ th·ªÉ gi·ªØ nguy√™n ho·∫∑c upload m·ªõi)
  - Tr·∫°ng th√°i n·ªïi b·∫≠t
  - Tr·∫°ng th√°i ho·∫°t ƒë·ªông
- X√≥a h√¨nh ·∫£nh c≈© n·∫øu upload h√¨nh ·∫£nh m·ªõi
- C·∫≠p nh·∫≠t th√¥ng tin v√†o database

#### 4.4 X√≥a m√≥n ƒÉn

  **M√¥ t·∫£:** X√≥a m√≥n ƒÉn kh·ªèi h·ªá th·ªëng.

  **Ch·ª©c nƒÉng:**

- X√°c nh·∫≠n tr∆∞·ªõc khi x√≥a
- X√≥a h√¨nh ·∫£nh m√≥n ƒÉn kh·ªèi server
- X√≥a b·∫£n ghi trong database
- Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng/th·∫•t b·∫°i
- L∆∞u √Ω: C·∫ßn x·ª≠ l√Ω c√°c ƒë∆°n h√†ng ƒë√£ ƒë·∫∑t m√≥n n√†y (c√≥ th·ªÉ gi·ªØ l·∫°i th√¥ng tin ho·∫∑c x√≥a)

---

### 5. Qu·∫£n l√Ω ƒë∆°n h√†ng

#### 5.1 Xem danh s√°ch ƒë∆°n h√†ng

  **M√¥ t·∫£:** Hi·ªÉn th·ªã t·∫•t c·∫£ ƒë∆°n h√†ng trong h·ªá th·ªëng.

  **Ch·ª©c nƒÉng:**

- Hi·ªÉn th·ªã b·∫£ng danh s√°ch ƒë∆°n h√†ng:
  - STT
  - M√£ ƒë∆°n h√†ng (c√≥ n√∫t copy)
  - M√≥n ƒÉn
  - Gi√° ƒë∆°n v·ªã
  - S·ªë l∆∞·ª£ng
  - T·ªïng ti·ªÅn
  - Ng√†y ƒë·∫∑t h√†ng
  - Tr·∫°ng th√°i ƒë∆°n h√†ng (m√†u s·∫Øc kh√°c nhau):
    - ƒê√£ ƒë·∫∑t h√†ng (Ordered) - m√†u ƒëen
    - ƒêang giao h√†ng (On Delivery) - m√†u cam
    - ƒê√£ giao h√†ng (Delivered) - m√†u xanh l√°
    - ƒê√£ h·ªßy (Cancelled) - m√†u ƒë·ªè
  - Th√¥ng tin kh√°ch h√†ng:
    - T√™n kh√°ch h√†ng
    - S·ªë ƒëi·ªán tho·∫°i
    - Email
    - ƒê·ªãa ch·ªâ giao h√†ng
- S·∫Øp x·∫øp ƒë∆°n h√†ng m·ªõi nh·∫•t ·ªü tr√™n
- N√∫t "C·∫≠p nh·∫≠t ƒë∆°n h√†ng" cho m·ªói ƒë∆°n h√†ng

#### 5.2 C·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë∆°n h√†ng

  **M√¥ t·∫£:** Thay ƒë·ªïi tr·∫°ng th√°i ƒë∆°n h√†ng.

  **Ch·ª©c nƒÉng:**

- Form c·∫≠p nh·∫≠t tr·∫°ng th√°i:

  - Hi·ªÉn th·ªã th√¥ng tin ƒë∆°n h√†ng hi·ªán t·∫°i
  - Dropdown ch·ªçn tr·∫°ng th√°i m·ªõi:
    - Ordered (ƒê√£ ƒë·∫∑t h√†ng)
    - On Delivery (ƒêang giao h√†ng)
    - Delivered (ƒê√£ giao h√†ng)
    - Cancelled (ƒê√£ h·ªßy)
  - C√≥ th·ªÉ c·∫≠p nh·∫≠t th√¥ng tin kh√°ch h√†ng
- C·∫≠p nh·∫≠t tr·∫°ng th√°i v√†o database
- Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng/th·∫•t b·∫°i
- L∆∞u √Ω: Khi ƒë∆°n h√†ng chuy·ªÉn sang "Delivered", t√≠nh v√†o doanh thu

  **Lu·ªìng x·ª≠ l√Ω:**

```mermaid
sequenceDiagram
    participant Admin as Qu·∫£n tr·ªã vi√™n
    participant FE as Frontend (UI)
    participant BE as Backend (API)
    participant DB as Database

    Admin->>FE: Click "C·∫≠p nh·∫≠t" ƒë∆°n h√†ng
    FE-->>Admin: Hi·ªÉn th·ªã danh s√°ch Tr·∫°ng th√°i (Dropdown)
    Admin->>FE: Ch·ªçn tr·∫°ng th√°i m·ªõi & X√°c nh·∫≠n
  
    FE->>BE: G·ª≠i Request (Order ID + New Status)
    activate BE
    BE->>DB: Th·ª±c thi UPDATE ƒë∆°n h√†ng
    DB-->>BE: X√°c nh·∫≠n c·∫≠p nh·∫≠t th√†nh c√¥ng
  
    BE-->>FE: Ph·∫£n h·ªìi Th√†nh c√¥ng (JSON)
    deactivate BE
  
    FE-->>Admin: Hi·ªÉn th·ªã th√¥ng b√°o (Toast/Alert)
    FE->>FE: C·∫≠p nh·∫≠t l·∫°i UI (Refresh List)
  
```

  **S∆° ƒë·ªì lu·ªìng tr·∫°ng th√°i ƒë∆°n h√†ng:**

```mermaid
  stateDiagram-v2
      [*] --> Ordered: ƒê·∫∑t h√†ng
      Ordered --> OnDelivery: X√°c nh·∫≠n ƒë∆°n
      Ordered --> Cancelled: H·ªßy ƒë∆°n
      OnDelivery --> Delivered: Giao h√†ng th√†nh c√¥ng
      OnDelivery --> Cancelled: H·ªßy ƒë∆°n
      Delivered --> [*]
      Cancelled --> [*]
```

---

### 6. Qu·∫£n l√Ω chat v·ªõi ng∆∞·ªùi d√πng

#### 6.1 Xem danh s√°ch chat

  **M√¥ t·∫£:** Hi·ªÉn th·ªã danh s√°ch c√°c cu·ªôc tr√≤ chuy·ªán v·ªõi ng∆∞·ªùi d√πng.

  **Ch·ª©c nƒÉng:**

- Hi·ªÉn th·ªã danh s√°ch ng∆∞·ªùi d√πng ƒë√£ chat:
  - T√™n ng∆∞·ªùi d√πng
  - Tin nh·∫Øn cu·ªëi c√πng (r√∫t g·ªçn n·∫øu qu√° d√†i)
  - Th·ªùi gian tin nh·∫Øn cu·ªëi
  - Badge s·ªë tin nh·∫Øn ch∆∞a ƒë·ªçc (n·∫øu c√≥)
- S·∫Øp x·∫øp: Ng∆∞·ªùi d√πng c√≥ tin nh·∫Øn m·ªõi nh·∫•t ·ªü tr√™n
- Highlight ng∆∞·ªùi d√πng ƒëang chat
- Click v√†o ng∆∞·ªùi d√πng ƒë·ªÉ xem cu·ªôc tr√≤ chuy·ªán

#### 6.2 Chat v·ªõi ng∆∞·ªùi d√πng

  **M√¥ t·∫£:** Admin tr·∫£ l·ªùi tin nh·∫Øn t·ª´ ng∆∞·ªùi d√πng.

  **Ch·ª©c nƒÉng:**

- Giao di·ªán chat:

  - Hi·ªÉn th·ªã t·∫•t c·∫£ tin nh·∫Øn trong cu·ªôc tr√≤ chuy·ªán
  - Ph√¢n bi·ªát tin nh·∫Øn c·ªßa admin v√† user (m√†u s·∫Øc kh√°c nhau)
  - Hi·ªÉn th·ªã t√™n ng∆∞·ªùi g·ª≠i v√† th·ªùi gian
  - T·ª± ƒë·ªông scroll xu·ªëng tin nh·∫Øn m·ªõi nh·∫•t
- G·ª≠i tin nh·∫Øn:

  - Form nh·∫≠p tin nh·∫Øn
  - G·ª≠i tin nh·∫Øn qua AJAX
  - Hi·ªÉn th·ªã tin nh·∫Øn ngay sau khi g·ª≠i
  - L∆∞u v√†o database v·ªõi `sender_type = 'admin'`
- Nh·∫≠n tin nh·∫Øn:

  - Polling m·ªói 2 gi√¢y ƒë·ªÉ l·∫•y tin nh·∫Øn m·ªõi
  - T·ª± ƒë·ªông hi·ªÉn th·ªã tin nh·∫Øn m·ªõi t·ª´ user
  - ƒê√°nh d·∫•u tin nh·∫Øn ƒë√£ ƒë·ªçc khi admin xem
- C·∫≠p nh·∫≠t badge s·ªë tin nh·∫Øn ch∆∞a ƒë·ªçc sau khi ƒë·ªçc

  **Lu·ªìng x·ª≠ l√Ω:**

```mermaid
sequenceDiagram
    autonumber
    participant A as Admin (Dashboard)
    participant S as Server/API
    participant DB as Database
    participant U as Ng∆∞·ªùi d√πng (App/Web)

    A->>S: Ch·ªçn User & Y√™u c·∫ßu load tin nh·∫Øn
    S->>DB: Query tin nh·∫Øn theo conversation_id
    DB-->>S: Tr·∫£ v·ªÅ m·∫£ng messages
    S-->>A: Hi·ªÉn th·ªã l·ªãch s·ª≠ chat
  
    Note over A, S: Admin g·ª≠i ph·∫£n h·ªìi
    A->>S: G·ª≠i tin nh·∫Øn m·ªõi
    S->>DB: INSERT INTO messages (content, sender=admin)
    S-->>A: Th√†nh c√¥ng (Hi·ªÉn th·ªã ngay)
  
    Note over U, S: User tr·∫£ l·ªùi (v√†i gi√¢y sau)
    U->>S: G·ª≠i tin nh·∫Øn tr·∫£ l·ªùi
    S->>DB: L∆∞u tin nh·∫Øn c·ªßa User
  
    loop Polling m·ªói 3 gi√¢y
        A->>S: [GET] check_new_messages
        S->>DB: Query messages WHERE is_read=0
        DB-->>S: Tr·∫£ v·ªÅ tin nh·∫Øn m·ªõi c·ªßa User
        S-->>A: Hi·ªÉn th·ªã tin m·ªõi c·ªßa User tr√™n m√†n h√¨nh
    end
  
    A->>S: [POST] mark_as_read (ID tin nh·∫Øn)
    S->>DB: UPDATE messages SET is_read=1
    DB-->>S: X√°c nh·∫≠n ƒë√£ ƒë·ªçc
  
```

### 7. Qu·∫£n L√Ω Ho√†n Ti·ªÅn

**M·ª•c ƒë√≠ch:** Cho ph√©p qu·∫£n tr·ªã vi√™n t·∫°o, xem v√† qu·∫£n l√Ω c√°c y√™u c·∫ßu ho√†n ti·ªÅn.

**C√°c ch·ª©c nƒÉng ch√≠nh:**

1. **T·∫°o y√™u c·∫ßu ho√†n ti·ªÅn**

   - Nh·∫≠p m√£ ƒë∆°n h√†ng (`order_code`)
   - Nh·∫≠p s·ªë ti·ªÅn ho√†n (`refund_amount`)
   - Nh·∫≠p l√Ω do ho√†n ti·ªÅn (`refund_reason`)
   - Ch·ªçn ph∆∞∆°ng th·ª©c ho√†n ti·ªÅn (`refund_method`):
     - `original`: Ho√†n v·ªÅ ph∆∞∆°ng th·ª©c g·ªëc
     - `bank_transfer`: Chuy·ªÉn kho·∫£n ng√¢n h√†ng
     - `cash`: Ti·ªÅn m·∫∑t
2. **Validation v√† Ki·ªÉm tra**

   - Ki·ªÉm tra ƒë∆°n h√†ng t·ªìn t·∫°i
   - Ki·ªÉm tra ƒë∆°n h√†ng ƒë√£ thanh to√°n ch∆∞a
   - Ki·ªÉm tra ƒë√£ c√≥ refund request ch∆∞a (tr√°nh tr√πng l·∫∑p)
   - T·ª± ƒë·ªông li√™n k·∫øt v·ªõi payment record
3. **Danh s√°ch y√™u c·∫ßu ho√†n ti·ªÅn**

   - Hi·ªÉn th·ªã t·∫•t c·∫£ refund records
   - Th√¥ng tin chi ti·∫øt: ID, m√£ ƒë∆°n, kh√°ch h√†ng, s·ªë ti·ªÅn, l√Ω do, tr·∫°ng th√°i, ph∆∞∆°ng th·ª©c, th·ªùi gian, ng∆∞·ªùi x·ª≠ l√Ω
   - Color coding theo tr·∫°ng th√°i
4. **C·∫≠p nh·∫≠t tr·∫°ng th√°i ho√†n ti·ªÅn**

   - Modal popup ƒë·ªÉ c·∫≠p nh·∫≠t
   - Ch·ªçn tr·∫°ng th√°i m·ªõi:
     - `pending` ‚Üí `processing` ‚Üí `completed`
     - `pending` ‚Üí `processing` ‚Üí `failed`
   - Nh·∫≠p m√£ giao d·ªãch ho√†n ti·ªÅn (khi completed)
5. **T·ª± ƒë·ªông c·∫≠p nh·∫≠t li√™n quan**

   - C·∫≠p nh·∫≠t `payment.payment_status` = 'refunded'
   - C·∫≠p nh·∫≠t `order.payment_status` = 'refunded'
   - C·∫≠p nh·∫≠t `order.status` = 'Cancelled'
   - Ghi nh·∫≠n `processed_by` (admin_id) v√† `processed_at`

**Lu·ªìng x·ª≠ l√Ω ho√†n ti·ªÅn:**

```mermaid
sequenceDiagram
    participant A as Admin
    participant S as Server (PHP)
    participant DB as Database

    Note over A, DB: Giai ƒëo·∫°n 1: T·∫°o y√™u c·∫ßu ho√†n ti·ªÅn
    A->>S: G·ª≠i th√¥ng tin ho√†n ti·ªÅn (order_code, amount,...)
    S->>DB: Ki·ªÉm tra (Order t·ªìn t·∫°i, ƒê√£ thanh to√°n, ƒê√£ ho√†n ti·ªÅn ch∆∞a?)
    DB-->>S: Tr·∫£ v·ªÅ k·∫øt qu·∫£
  
    alt H·ª£p l·ªá
        S->>DB: T·∫°o Refund Record (pending)
        S->>DB: Update Status (Payment & Order -> refunded)
        S-->>A: Th√¥ng b√°o th√†nh c√¥ng
    else Th·∫•t b·∫°i
        S-->>A: Hi·ªÉn th·ªã l·ªói t∆∞∆°ng ·ª©ng
    end

    Note over A, DB: Giai ƒëo·∫°n 2: X·ª≠ l√Ω ho√†n ti·ªÅn
    A->>S: C·∫≠p nh·∫≠t tr·∫°ng th√°i (Completed) + Transaction ID
    S->>DB: Update Refund Record (status, transaction_id, admin_id, time)
    DB-->>S: X√°c nh·∫≠n l∆∞u
    S-->>A: Ho√†n t·∫•t quy tr√¨nh
```

5. **Status Workflow**

```mermaid
stateDiagram-v2
    [*] --> Pending

    Pending: Y√™u c·∫ßu m·ªõi t·∫°o\nCh·ªù x·ª≠ l√Ω

    Pending --> Processing: B·∫Øt ƒë·∫ßu x·ª≠ l√Ω ho√†n ti·ªÅn

    Processing: ƒêang x·ª≠ l√Ω ho√†n ti·ªÅn

    Processing --> Completed: Ho√†n ti·ªÅn th√†nh c√¥ng
    Processing --> Failed: Ho√†n ti·ªÅn kh√¥ng th√†nh c√¥ng

    Completed: Ho√†n t·∫•t
    Failed: Th·∫•t b·∫°i

```

**M√¥ t·∫£ tr·∫°ng th√°i:**

- **pending**: Y√™u c·∫ßu m·ªõi t·∫°o, ƒëang ch·ªù admin x·ª≠ l√Ω
- **processing**: Admin ƒë√£ b·∫Øt ƒë·∫ßu x·ª≠ l√Ω, ƒëang ch·ªù ho√†n t·∫•t
- **completed**: ƒê√£ ho√†n t·∫•t, ti·ªÅn ƒë√£ ƒë∆∞·ª£c tr·∫£ l·∫°i kh√°ch h√†ng
- **failed**: X·ª≠ l√Ω th·∫•t b·∫°i, c·∫ßn x·ª≠ l√Ω l·∫°i ho·∫∑c li√™n h·ªá kh√°ch h√†ng

**T√≠nh nƒÉng ƒë·∫∑c bi·ªát:**

- Ch·ªâ admin m·ªõi c√≥ quy·ªÅn t·∫°o v√† c·∫≠p nh·∫≠t refund
- Tracking ƒë·∫ßy ƒë·ªß ai x·ª≠ l√Ω v√† khi n√†o (`processed_by`, `processed_at`)
- T·ª± ƒë·ªông c·∫≠p nh·∫≠t c√°c b·∫£ng li√™n quan
- H·ªó tr·ª£ partial refund (s·ªë ti·ªÅn ho√†n < s·ªë ti·ªÅn ƒë√£ thanh to√°n)

---

### 8. Trang Qu·∫£n L√Ω Thanh To√°n

**M·ª•c ƒë√≠ch:** Cho ph√©p qu·∫£n tr·ªã vi√™n xem v√† qu·∫£n l√Ω t·∫•t c·∫£ c√°c giao d·ªãch thanh to√°n trong h·ªá th·ªëng.

**C√°c ch·ª©c nƒÉng ch√≠nh:**

1. **Danh s√°ch giao d·ªãch thanh to√°n**

   - Hi·ªÉn th·ªã t·∫•t c·∫£ payment records
   - S·∫Øp x·∫øp theo th·ªùi gian (m·ªõi nh·∫•t tr∆∞·ªõc)
   - Hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß th√¥ng tin: ID, m√£ ƒë∆°n, ph∆∞∆°ng th·ª©c, s·ªë ti·ªÅn, tr·∫°ng th√°i, m√£ giao d·ªãch, th·ªùi gian
2. **L·ªçc v√† t√¨m ki·∫øm**

   - T√¨m ki·∫øm theo order_code
   - L·ªçc theo tr·∫°ng th√°i thanh to√°n
   - L·ªçc theo ph∆∞∆°ng th·ª©c thanh to√°n
3. **Chi ti·∫øt giao d·ªãch**

   - Click v√†o ƒë∆°n h√†ng ƒë·ªÉ xem chi ti·∫øt
   - Link ƒë·∫øn trang qu·∫£n l√Ω ƒë∆°n h√†ng
4. **X·ª≠ l√Ω ho√†n ti·ªÅn**

   - Link nhanh ƒë·∫øn trang ho√†n ti·ªÅn cho payment ƒë√£ th√†nh c√¥ng
   - T·ª± ƒë·ªông ƒëi·ªÅn order_code

**C√°c tr·∫°ng th√°i thanh to√°n:**

- **pending** (Ch·ªù thanh to√°n) - m√†u cam
- **success** (Th√†nh c√¥ng) - m√†u xanh
- **failed** (Th·∫•t b·∫°i) - m√†u ƒë·ªè
- **cancelled** (ƒê√£ h·ªßy) - m√†u x√°m
- **refunded** (ƒê√£ ho√†n ti·ªÅn) - m√†u t√≠m

**T√≠nh nƒÉng:**

- Real-time data t·ª´ database
- Color coding cho tr·∫°ng th√°i
- Quick actions (Xem ƒë∆°n h√†ng, Ho√†n ti·ªÅn)
- Responsive table design

---

## 5.3 S∆° ƒë·ªì t·ªïng quan h·ªá th·ªëng

### 5.3.1 S∆° ƒë·ªì lu·ªìng ng∆∞·ªùi d√πng

```mermaid
  sequenceDiagram
    autonumber
    participant U as Ng∆∞·ªùi d√πng
    participant S as H·ªá th·ªëng (Frontend/Server)
    participant DB as Database / Admin

    U->>S: Truy c·∫≠p Trang ch·ªß
    S->>S: Ki·ªÉm tra tr·∫°ng th√°i ƒëƒÉng nh·∫≠p

    alt Ch∆∞a ƒëƒÉng nh·∫≠p
        S-->>U: Hi·ªÉn th·ªã trang ƒêƒÉng k√Ω/ƒêƒÉng nh·∫≠p
        U->>S: G·ª≠i th√¥ng tin ƒëƒÉng k√Ω
        S->>DB: L∆∞u User & G·ª≠i OTP/Email
        DB-->>S: X√°c nh·∫≠n x√°c minh email
        S-->>U: Y√™u c·∫ßu ƒêƒÉng nh·∫≠p
        U->>S: Nh·∫≠p t√†i kho·∫£n/m·∫≠t kh·∫©u
        S->>DB: Ki·ªÉm tra th√¥ng tin
        DB-->>S: Tr·∫£ v·ªÅ Session/Token
    else ƒê√£ ƒëƒÉng nh·∫≠p
        S-->>U: Hi·ªÉn th·ªã trang Duy·ªát m√≥n ƒÉn
    end

    Note over U, S: Giai ƒëo·∫°n Mua s·∫Øm
    U->>S: T√¨m ki·∫øm / Xem danh m·ª•c
    S->>DB: Query danh s√°ch m√≥n ƒÉn
    DB-->>S: Tr·∫£ v·ªÅ k·∫øt qu·∫£
    U->>S: Th√™m m√≥n v√†o Gi·ªè h√†ng
    S->>DB: L∆∞u item v√†o gi·ªè h√†ng
  
    U->>S: Truy c·∫≠p xem Gi·ªè h√†ng & Click Thanh to√°n
    S->>DB: Ki·ªÉm tra t·ªìn kho & T√≠nh t·ªïng ti·ªÅn
    DB-->>S: Tr·∫£ v·ªÅ th√¥ng tin thanh to√°n
    U->>S: X√°c nh·∫≠n ƒë·∫∑t h√†ng
    S->>DB: T·∫°o ƒë∆°n h√†ng & X√≥a gi·ªè h√†ng
  
    Note over S, DB: Giai ƒëo·∫°n X·ª≠ l√Ω & Theo d√µi
    S-->>U: ƒê·∫∑t h√†ng th√†nh c√¥ng!
    U->>S: Theo d√µi tr·∫°ng th√°i ƒë∆°n h√†ng
    S->>DB: L·∫•y status (ƒêang x·ª≠ l√Ω/ƒêang giao)
    U->>S: Xem L·ªãch s·ª≠ ƒë∆°n h√†ng
    U->>DB: Chat v·ªõi Admin (Khi c·∫ßn h·ªó tr·ª£)
    DB-->>U: Admin ph·∫£n h·ªìi tin nh·∫Øn
```

### 5.3.2 S∆° ƒë·ªì lu·ªìng qu·∫£n tr·ªã vi√™n

```mermaid
  sequenceDiagram
    autonumber
    participant A as Admin
    participant S as Server/Backend
    participant DB as Database
    participant U as Ng∆∞·ªùi d√πng (Client)

    A->>S: ƒêƒÉng nh·∫≠p Admin
    S->>DB: Ki·ªÉm tra quy·ªÅn (Role)
    DB-->>S: H·ª£p l·ªá
    S-->>A: Hi·ªÉn th·ªã Dashboard
  
    Note over A, DB: Qu·∫£n l√Ω M√≥n ƒÉn
    A->>S: C·∫≠p nh·∫≠t th√¥ng tin m√≥n ƒÉn
    S->>DB: L∆∞u thay ƒë·ªïi (UPDATE)
    DB-->>S: Th√†nh c√¥ng
    S-->>A: Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng

    Note over A, U: Qu·∫£n l√Ω Chat & ƒê∆°n h√†ng
    A->>S: Xem danh s√°ch Chat
    S->>DB: L·∫•y tin nh·∫Øn m·ªõi
    DB-->>S: Tr·∫£ v·ªÅ d·ªØ li·ªáu
    A->>S: G·ª≠i tin nh·∫Øn tr·∫£ l·ªùi
    S-->>U: Hi·ªÉn th·ªã tin nh·∫Øn cho User
  
    A->>S: C·∫≠p nh·∫≠t tr·∫°ng th√°i ƒê∆°n h√†ng (E2)
    S->>DB: Update status='Shipping'
    S-->>U: G·ª≠i th√¥ng b√°o: ƒê∆°n h√†ng ƒëang giao
```

### 5.3.4 S∆° ƒë·ªì t∆∞∆°ng t√°c User - Admin

```mermaid
  sequenceDiagram
      participant U as User
      participant S as System
      participant A as Admin
  
      U->>S: ƒêƒÉng k√Ω t√†i kho·∫£n
      S->>U: G·ª≠i m√£ x√°c minh email
      U->>S: X√°c minh m√£
      S->>U: T·∫°o t√†i kho·∫£n th√†nh c√¥ng
  
      U->>S: ƒêƒÉng nh·∫≠p
      S->>U: X√°c th·ª±c th√†nh c√¥ng
  
      U->>S: Duy·ªát m√≥n ƒÉn
      U->>S: Th√™m v√†o gi·ªè h√†ng
      U->>S: Thanh to√°n
      S->>U: T·∫°o ƒë∆°n h√†ng
  
      A->>S: Xem danh s√°ch ƒë∆°n h√†ng
      A->>S: C·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë∆°n h√†ng
      S->>U: Th√¥ng b√°o tr·∫°ng th√°i m·ªõi (n·∫øu c√≥)
  
      U->>S: G·ª≠i tin nh·∫Øn chat
      S->>A: Th√¥ng b√°o tin nh·∫Øn m·ªõi
      A->>S: Tr·∫£ l·ªùi tin nh·∫Øn
      S->>U: Hi·ªÉn th·ªã tin nh·∫Øn m·ªõi
```

### 5.3.5 S∆° ƒê·ªì Lu·ªìng Thanh To√°n

```mermaid
sequenceDiagram
    autonumber
    participant U as Ng∆∞·ªùi d√πng
    participant FE as Frontend (UI)
    participant BE as Backend (Server)
    participant DB as Database

    U->>FE: M·ªü trang thanh to√°n
    FE->>BE: G·ª≠i order_code & session_id
  
    activate BE
    BE->>BE: Ki·ªÉm tra ƒëƒÉng nh·∫≠p (Session)
    BE->>DB: Truy v·∫•n th√¥ng tin ƒë∆°n h√†ng
    DB-->>BE: Tr·∫£ v·ªÅ d·ªØ li·ªáu ƒë∆°n h√†ng
    BE-->>FE: Hi·ªÉn th·ªã th√¥ng tin ƒë∆°n h√†ng
    deactivate BE

    U->>FE: Ch·ªçn PTTT & Nh·∫•n "X√°c nh·∫≠n"
    FE->>BE: G·ª≠i y√™u c·∫ßu thanh to√°n (POST)
  
    activate BE
    BE->>DB: Ghi nh·∫≠n thanh to√°n (Payment Record)
    BE->>DB: C·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë∆°n h√†ng (Status: Paid)
    DB-->>BE: X√°c nh·∫≠n l∆∞u th√†nh c√¥ng
    BE-->>FE: Ph·∫£n h·ªìi k·∫øt qu·∫£ (Redirect URL)
    deactivate BE

    FE->>U: Chuy·ªÉn h∆∞·ªõng ƒë·∫øn L·ªãch s·ª≠ ƒë∆°n h√†ng
    FE-->>U: Hi·ªÉn th·ªã th√¥ng b√°o "Th√†nh c√¥ng"


```

### 5.3.6 S∆° ƒê·ªì Lu·ªìng Ho√†n Ti·ªÅn

```mermaid
sequenceDiagram
    autonumber
    participant A as Admin
    participant S as H·ªá th·ªëng (Backend)
    participant DB as Database

    A->>S: Truy c·∫≠p Trang ho√†n ti·ªÅn
    S->>DB: L·∫•y danh s√°ch y√™u c·∫ßu & ƒë∆°n h√†ng
    DB-->>S: Tr·∫£ v·ªÅ d·ªØ li·ªáu
    S-->>A: Hi·ªÉn th·ªã Form & Danh s√°ch y√™u c·∫ßu

    A->>S: G·ª≠i y√™u c·∫ßu ho√†n ti·ªÅn (order_code, amount,...)
  
    activate S
    S->>DB: Ki·ªÉm tra (T·ªìn t·∫°i, ƒê√£ thanh to√°n, ƒê√£ ho√†n ch∆∞a?)
    DB-->>S: K·∫øt qu·∫£ h·ª£p l·ªá
  
    S->>DB: T·∫°o Refund Record (status: pending)
    S->>DB: C·∫≠p nh·∫≠t status (Payment & Order -> refunded)
    DB-->>S: X√°c nh·∫≠n l∆∞u th√†nh c√¥ng
    S-->>A: Th√¥ng b√°o t·∫°o y√™u c·∫ßu th√†nh c√¥ng
    deactivate S

    Note over A, DB: Qu·∫£n tr·ªã vi√™n x·ª≠ l√Ω theo lu·ªìng
    A->>S: C·∫≠p nh·∫≠t tr·∫°ng th√°i x·ª≠ l√Ω (Pending -> Completed)
    S->>DB: Ghi nh·∫≠n admin_id, time, transaction_id
    DB-->>S: Ho√†n t·∫•t c·∫≠p nh·∫≠t
    S-->>A: Hi·ªÉn th·ªã tr·∫°ng th√°i m·ªõi
```

### 5.3.7 S∆° ƒê·ªì Tr·∫°ng Th√°i Thanh To√°n

```mermaid
sequenceDiagram
    autonumber
    participant U as Ng∆∞·ªùi d√πng
    participant S as H·ªá th·ªëng (System)
    participant G as C·ªïng thanh to√°n (Gateway)
    participant A as Qu·∫£n tr·ªã vi√™n (Admin)

    U->>S: Kh·ªüi t·∫°o thanh to√°n
    S->>S: T·∫°o b·∫£n ghi (Tr·∫°ng th√°i: Pending)
  
    alt Thanh to√°n th√†nh c√¥ng
        G-->>S: G·ª≠i t√≠n hi·ªáu th√†nh c√¥ng (IPN/Webhook)
        S->>S: C·∫≠p nh·∫≠t tr·∫°ng th√°i: Success
        S-->>U: Th√¥ng b√°o: Th√†nh c√¥ng
    else Thanh to√°n th·∫•t b·∫°i
        G-->>S: G·ª≠i t√≠n hi·ªáu l·ªói
        S->>S: C·∫≠p nh·∫≠t tr·∫°ng th√°i: Failed
        S-->>U: Th√¥ng b√°o: Th·∫•t b·∫°i (M·ªùi th·ª≠ l·∫°i)
    else H·∫øt th·ªùi gian (Timeout)
        S->>S: Cronjob qu√©t ƒë∆°n qu√° h·∫°n
        S->>S: C·∫≠p nh·∫≠t tr·∫°ng th√°i: Cancelled
    end

    Note over A, S: Quy tr√¨nh h·∫≠u m√£i
    A->>S: Y√™u c·∫ßu ho√†n ti·ªÅn (Refund request)
    S->>G: G·ª≠i l·ªánh ho√†n ti·ªÅn qua API
    G-->>S: X√°c nh·∫≠n ho√†n ti·ªÅn th√†nh c√¥ng
    S->>S: C·∫≠p nh·∫≠t tr·∫°ng th√°i: Refunded
             
```

---

## 6. Thi·∫øt k·∫ø d·ªØ li·ªáu

H·ªá th·ªëng Web Food ƒë∆∞·ª£c x√¢y d·ª±ng nh·∫±m ph·ª•c v·ª• ho·∫°t ƒë·ªông ƒë·∫∑t m√≥n ƒÉn tr·ª±c tuy·∫øn, qu·∫£n l√Ω ƒë∆°n h√†ng v√† h·ªó tr·ª£ kh√°ch h√†ng. C∆° s·ªü d·ªØ li·ªáu **food-order** ƒë∆∞·ª£c thi·∫øt k·∫ø tr√™n n·ªÅn t·∫£ng MariaDB/MySQL, ƒë√°p ·ª©ng c√°c y√™u c·∫ßu l∆∞u tr·ªØ, truy xu·∫•t v√† ƒë·∫£m b·∫£o t√≠nh to√†n v·∫πn d·ªØ li·ªáu.

C√°c nh√≥m d·ªØ li·ªáu ch√≠nh trong h·ªá th·ªëng bao g·ªìm:

* **D·ªØ li·ªáu qu·∫£n tr·ªã vi√™n** : ph·ª•c v·ª• cho vi·ªác qu·∫£n l√Ω h·ªá th·ªëng, theo d√µi v√† x·ª≠ l√Ω c√°c y√™u c·∫ßu t·ª´ ng∆∞·ªùi d√πng.
* **D·ªØ li·ªáu ng∆∞·ªùi d√πng** : l∆∞u tr·ªØ th√¥ng tin t√†i kho·∫£n kh√°ch h√†ng ƒëƒÉng k√Ω s·ª≠ d·ª•ng d·ªãch v·ª•.
* **D·ªØ li·ªáu danh m·ª•c m√≥n ƒÉn** : h·ªó tr·ª£ ph√¢n lo·∫°i m√≥n ƒÉn theo t·ª´ng nh√≥m c·ª• th·ªÉ.
* **D·ªØ li·ªáu m√≥n ƒÉn** : qu·∫£n l√Ω th√¥ng tin chi ti·∫øt c·ªßa c√°c m√≥n ƒë∆∞·ª£c cung c·∫•p tr√™n h·ªá th·ªëng.
* **D·ªØ li·ªáu ƒë∆°n h√†ng** : ghi nh·∫≠n qu√° tr√¨nh ƒë·∫∑t m√≥n, tr·∫°ng th√°i v√† th√¥ng tin giao h√†ng.
* **D·ªØ li·ªáu tr√≤ chuy·ªán** : l∆∞u l·ªãch s·ª≠ trao ƒë·ªïi gi·ªØa kh√°ch h√†ng v√† qu·∫£n tr·ªã vi√™n nh·∫±m h·ªó tr·ª£ v√† gi·∫£i ƒë√°p th·∫Øc m·∫Øc.

C√°ch t·ªï ch·ª©c d·ªØ li·ªáu theo m√¥ h√¨nh quan h·ªá gi√∫p h·ªá th·ªëng v·∫≠n h√†nh ·ªïn ƒë·ªãnh, d·ªÖ b·∫£o tr√¨ v√† thu·∫≠n ti·ªán cho vi·ªác m·ªü r·ªông trong t∆∞∆°ng lai.

### 6.1 Ph√¢n t√≠ch d·ªØ li·ªáu h·ªá th·ªëng
tbl_category (Danh m·ª•c)
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ title (T√™n danh m·ª•c)
‚îú‚îÄ‚îÄ image_name
‚îú‚îÄ‚îÄ featured (N·ªïi b·∫≠t)
‚îî‚îÄ‚îÄ active (Tr·∫°ng th√°i)

tbl_food (M√≥n ƒÉn)
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ title (T√™n m√≥n)
‚îú‚îÄ‚îÄ description (M√¥ t·∫£)
‚îú‚îÄ‚îÄ price (Gi√°)
‚îú‚îÄ‚îÄ image_name
‚îú‚îÄ‚îÄ category_id (FK ‚Üí tbl_category.id)
‚îú‚îÄ‚îÄ featured
‚îî‚îÄ‚îÄ active

tbl_cart (Gi·ªè h√†ng t·∫°m th·ªùi)
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ user_id (FK ‚Üí tbl_user.id)
‚îú‚îÄ‚îÄ food_id (FK ‚Üí tbl_food.id)
‚îú‚îÄ‚îÄ food_name
‚îú‚îÄ‚îÄ price
‚îî‚îÄ‚îÄ quantity

tbl_order (ƒê∆°n h√†ng)
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ order_code (M√£ ƒë∆°n h√†ng duy nh·∫•t)
‚îú‚îÄ‚îÄ user_id (FK ‚Üí tbl_user.id)
‚îú‚îÄ‚îÄ food (T√™n m√≥n ƒÉn)
‚îú‚îÄ‚îÄ price / qty / total
‚îú‚îÄ‚îÄ order_date
‚îú‚îÄ‚îÄ status (Ordered, On Delivery, Delivered, Cancelled)
‚îî‚îÄ‚îÄ customer_info (Name, Contact, Email, Address)

tbl_payment (Thanh to√°n)
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ order_code (FK ‚Üí tbl_order.order_code)
‚îú‚îÄ‚îÄ user_id (FK ‚Üí tbl_user.id)
‚îú‚îÄ‚îÄ payment_method (vnpay, momo, cash)
‚îú‚îÄ‚îÄ amount
‚îú‚îÄ‚îÄ transaction_id
‚îî‚îÄ‚îÄ payment_status

tbl_verification (X√°c th·ª±c)
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ email / phone
‚îú‚îÄ‚îÄ verification_code (OTP)
‚îú‚îÄ‚îÄ verification_type (email/phone)
‚îî‚îÄ‚îÄ expires_at

tbl_chat (H·ªó tr·ª£ tr·ª±c tuy·∫øn)
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ user_id (FK ‚Üí tbl_user.id)
‚îú‚îÄ‚îÄ admin_id (FK ‚Üí tbl_admin.id)
‚îú‚îÄ‚îÄ message
‚îî‚îÄ‚îÄ sender_type (user/admin)

tbl_user (Kh√°ch h√†ng)
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ full_name (H·ªç v√† t√™n)
‚îú‚îÄ‚îÄ username (T√™n ƒëƒÉng nh·∫≠p)
‚îú‚îÄ‚îÄ password (M·∫≠t kh·∫©u m√£ h√≥a)
‚îú‚îÄ‚îÄ email
‚îú‚îÄ‚îÄ phone (S·ªë ƒëi·ªán tho·∫°i)
‚îú‚îÄ‚îÄ address (ƒê·ªãa ch·ªâ giao h√†ng)
‚îú‚îÄ‚îÄ status (Tr·∫°ng th√°i t√†i kho·∫£n: Active,...)
‚îî‚îÄ‚îÄ created_at

tbl_refund (Ho√†n ti·ªÅn)
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ order_code (FK ‚Üí tbl_order.order_code)
‚îú‚îÄ‚îÄ payment_id (FK ‚Üí tbl_payment.id)
‚îú‚îÄ‚îÄ user_id (FK ‚Üí tbl_user.id)
‚îú‚îÄ‚îÄ refund_amount (S·ªë ti·ªÅn ho√†n)
‚îú‚îÄ‚îÄ refund_reason (L√Ω do ho√†n ti·ªÅn)
‚îú‚îÄ‚îÄ refund_status (Tr·∫°ng th√°i: pending, processing, completed, failed)
‚îú‚îÄ‚îÄ refund_method (Ph∆∞∆°ng th·ª©c: original, bank_transfer, cash)
‚îú‚îÄ‚îÄ refund_transaction_id (M√£ giao d·ªãch ho√†n ti·ªÅn)
‚îú‚îÄ‚îÄ processed_by (Admin x·ª≠ l√Ω - FK ‚Üí tbl_admin.id)
‚îú‚îÄ‚îÄ processed_at / created_at / updated_at

tbl_admin (Qu·∫£n tr·ªã vi√™n)
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ full_name
‚îú‚îÄ‚îÄ username
‚îú‚îÄ‚îÄ password
‚îú‚îÄ‚îÄ email
‚îî‚îÄ‚îÄ phone

### 6.2 Thi·∫øt k·∫ø d·ªØ li·ªáu (L∆∞·ª£c ƒë·ªì quan h·ªá)

C√°c b·∫£ng d·ªØ li·ªáu trong h·ªá th·ªëng ƒë∆∞·ª£c thi·∫øt k·∫ø nh∆∞ sau:
* **TBL_ADMIN** (id PK, full_name, email, username, password)
* **tbl_category** (id PK, title, image_name, featured, active)
* **tbl_food** (id PK, title, description, price, image_name, category_id FK, featured, active)
* **tbl_user / tbl_admin** (id PK, full_name, username, password, email, phone)
* **tbl_cart** (id PK, user_id FK, food_id FK, food_name, price, quantity)
* **tbl_order** (id PK, order_code, user_id FK, food, price, qty, total, order_date, status, customer_info)
* **tbl_payment** (id PK, order_code FK, user_id FK, payment_method, amount, transaction_id, payment_status)
* **tbl_verification** (id PK, email / phone, verification_code, verification_type, expires_at)
* **tbl_chat** (id PK, user_id FK, admin_id FK, message, sender_type)
* **tbl_user** (id PK, full_name, username, password, email, phone, address, status, created_at)
* **tbl_refund** (id PK, order_code FK, payment_id FK, user_id FK, refund_amount, refund_reason, refund_status, refund_method, refund_transaction_id, processed_by FK, processed_at / created_at / updated_at)
* **tbl_admin** (id PK, full_name, username, password, email, phone)


C√°c r√†ng bu·ªôc kh√≥a ngo·∫°i ƒë∆∞·ª£c thi·∫øt l·∫≠p nh·∫±m ƒë·∫£m b·∫£o t√≠nh to√†n v·∫πn d·ªØ li·ªáu, ƒë·ªìng th·ªùi h·ªó tr·ª£ ki·ªÉm so√°t m·ªëi quan h·ªá gi·ªØa c√°c b·∫£ng.

### 6.3 S∆° ƒë·ªì ERD
![img](public/assets/images/ERD_wowfood.png)
S∆° ƒë·ªì ERD th·ªÉ hi·ªán r√µ c·∫•u tr√∫c t·ªïng th·ªÉ c·ªßa c∆° s·ªü d·ªØ li·ªáu v√† m·ªëi li√™n h·ªá gi·ªØa c√°c b·∫£ng. Ng∆∞·ªùi d√πng li√™n k·∫øt v·ªõi b·∫£ng ƒë∆°n h√†ng v√† b·∫£ng tr√≤ chuy·ªán; qu·∫£n tr·ªã vi√™n tham gia v√†o qu√° tr√¨nh trao ƒë·ªïi h·ªó tr·ª£; danh m·ª•c ƒë√≥ng vai tr√≤ ph√¢n lo·∫°i cho c√°c m√≥n ƒÉn.

M·∫∑c d√π thi·∫øt k·∫ø hi·ªán t·∫°i ƒë√°p ·ª©ng t·ªët nhu c·∫ßu c·ªßa h·ªá th·ªëng, tuy nhi√™n b·∫£ng ƒë∆°n h√†ng v·∫´n l∆∞u tr·ª±c ti·∫øp t√™n m√≥n ƒÉn thay v√¨ li√™n k·∫øt kh√≥a ngo·∫°i t·ªõi b·∫£ng m√≥n ƒÉn. ƒêi·ªÅu n√†y c√≥ th·ªÉ g√¢y kh√≥ khƒÉn trong vi·ªác m·ªü r·ªông v√† chu·∫©n h√≥a d·ªØ li·ªáu khi h·ªá th·ªëng ph√°t tri·ªÉn l·ªõn h∆°n.

**K·∫øt lu·∫≠n:**
Thi·∫øt k·∫ø d·ªØ li·ªáu c·ªßa h·ªá th·ªëng Web Food ƒë∆∞·ª£c x√¢y d·ª±ng ph√π h·ª£p v·ªõi y√™u c·∫ßu nghi·ªáp v·ª• th·ª±c t·∫ø, ƒë·∫£m b·∫£o kh·∫£ nƒÉng qu·∫£n l√Ω, truy xu·∫•t v√† v·∫≠n h√†nh ·ªïn ƒë·ªãnh. Trong giai ƒëo·∫°n ti·∫øp theo, h·ªá th·ªëng c√≥ th·ªÉ ƒë∆∞·ª£c c·∫£i ti·∫øn b·∫±ng c√°ch chu·∫©n h√≥a s√¢u h∆°n c·∫•u tr√∫c c∆° s·ªü d·ªØ li·ªáu nh·∫±m n√¢ng cao hi·ªáu qu·∫£ v√† t√≠nh m·ªü r·ªông.
